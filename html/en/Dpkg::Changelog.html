<html>
<head><meta charset=utf-8/>
<title>Dpkg::Changelog - base class to implement a changelog parser</title></head>
<body><pre>

Dpkg::Changelog(3)                libdpkg-perl                Dpkg::Changelog(3)



NAME
       Dpkg::Changelog - base class to implement a changelog parser

DESCRIPTION
       Dpkg::Changelog is a class representing a changelog file as an array of
       changelog entries (Dpkg::Changelog::Entry).  By deriving this object and
       implementing its parse method, you add the ability to fill this object
       with changelog entries.

   FUNCTIONS
       my $c = Dpkg::Changelog-&gt;new(%options)
           Creates a new changelog object.

       $c-&gt;load($filename)
           Parse $filename as a changelog.

       $c-&gt;set_options(%opts)
           Change the value of some options. &quot;verbose&quot; (defaults to 1) defines
           whether parse errors are displayed as warnings by default.
           &quot;reportfile&quot; is a string to use instead of the name of the file
           parsed, in particular in error messages. &quot;range&quot; defines the range of
           entries that we want to parse, the parser will stop as soon as it has
           parsed enough data to satisfy $c-&gt;get_range($opts{&apos;range&apos;}).

       $c-&gt;reset_parse_errors()
           Can be used to delete all information about errors occurred during
           previous parse runs.

       $c-&gt;parse_error($line_nr, $error, [$line])
           Record a new parse error at line $line_nr. The error message is
           specified with $error and a copy of the line can be recorded in
           $line.

       $c-&gt;get_parse_errors()
           Returns all error messages from the last parse run.  If called in
           scalar context returns a human readable string representation. If
           called in list context returns an array of arrays. Each of these
           arrays contains

           1.  a string describing the origin of the data (a filename usually).
               If the reportfile configuration option was given, its value will
               be used instead.

           2.  the line number where the error occurred

           3.  an error description

           4.  the original line

       $c-&gt;set_unparsed_tail($tail)
           Add a string representing unparsed lines after the changelog entries.
           Use undef as $tail to remove the unparsed lines currently set.

       $c-&gt;get_unparsed_tail()
           Return a string representing the unparsed lines after the changelog
           entries. Returns undef if there&apos;s no such thing.

       @{$c}
           Returns all the Dpkg::Changelog::Entry objects contained in this
           changelog in the order in which they have been parsed.

       $c-&gt;get_range($range)
           Returns an array (if called in list context) or a reference to an
           array of Dpkg::Changelog::Entry objects which each represent one
           entry of the changelog. $range is a hash reference describing the
           range of entries to return. See section &quot;RANGE SELECTION&quot;.

       $c-&gt;abort_early()
           Returns true if enough data have been parsed to be able to return all
           entries selected by the range set at creation (or with set_options).

       $c-&gt;save($filename)
           Save the changelog in the given file.

       $c-&gt;output()
       &quot;$c&quot;
           Returns a string representation of the changelog (it&apos;s a
           concatenation of the string representation of the individual
           changelog entries).

       $c-&gt;output($fh)
           Output the changelog to the given filehandle.

       my $control = $c-&gt;dpkg($range)
           Returns a Dpkg::Control::Changelog object representing the entries
           selected by the optional range specifier (see &quot;RANGE SELECTION&quot; for
           details).  Returns undef in no entries are matched.

           The following fields are contained in the object:

           Source
               package name (in the first entry)

           Version
               packages&apos; version (from first entry)

           Distribution
               target distribution (from first entry)

           Urgency
               urgency (highest of all printed entries)

           Maintainer
               person that created the (first) entry

           Date
               date of the (first) entry

           Closes
               bugs closed by the entry/entries, sorted by bug number

           Changes
               content of the the entry/entries

       my @controls = $c-&gt;rfc822($range)
           Returns a Dpkg::Index containing Dpkg::Control::Changelog objects
           where each object represents one entry in the changelog that is part
           of the range requested (see &quot;RANGE SELECTION&quot; for details). For the
           format of such an object see the description of the &quot;dpkg&quot; method
           (while ignoring the remarks about which values are taken from the
           first entry).

RANGE SELECTION
       A range selection is described by a hash reference where the allowed keys
       and values are described below.

       The following options take a version number as value.

       since
           Causes changelog information from all versions strictly later than
           version to be used.
&#12;       until
           Causes changelog information from all versions strictly earlier than
           version to be used.

       from
           Similar to &quot;since&quot; but also includes the information for the
           specified version itself.

       to  Similar to &quot;until&quot; but also includes the information for the
           specified version itself.

       The following options don&apos;t take version numbers as values:

       all If set to a true value, all entries of the changelog are returned,
           this overrides all other options.

       count
           Expects a signed integer as value. Returns &quot;value&quot; entries from the
           top of the changelog if set to a positive integer, and &quot;abs(value)&quot;
           entries from the tail if set to a negative integer.

       offset
           Expects a signed integer as value. Changes the starting point for
           &quot;count&quot;, either counted from the top (positive integer) or from the
           tail (negative integer). &quot;offset&quot; has no effect if &quot;count&quot; wasn&apos;t
           given as well.

       Some examples for the above options. Imagine an example changelog with
       entries for the versions 1.2, 1.3, 2.0, 2.1, 2.2, 3.0 and 3.1.

                   Range                           Included entries
        C&lt;{ since =E&lt;gt&gt; &apos;2.0&apos; }&gt;                  3.1, 3.0, 2.2
        C&lt;{ until =E&lt;gt&gt; &apos;2.0&apos; }&gt;                  1.3, 1.2
        C&lt;{ from =E&lt;gt&gt; &apos;2.0&apos; }&gt;                   3.1, 3.0, 2.2, 2.1, 2.0
        C&lt;{ to =E&lt;gt&gt; &apos;2.0&apos; }&gt;                     2.0, 1.3, 1.2
        C&lt;{ count =E&lt;gt&gt; 2 }&gt;                      3.1, 3.0
        C&lt;{ count =E&lt;gt&gt; -2 }&gt;                     1.3, 1.2
        C&lt;{ count =E&lt;gt&gt; 3, offset=E&lt;gt&gt; 2 }&gt;      2.2, 2.1, 2.0
        C&lt;{ count =E&lt;gt&gt; 2, offset=E&lt;gt&gt; -3 }&gt;     2.0, 1.3
        C&lt;{ count =E&lt;gt&gt; -2, offset=E&lt;gt&gt; 3 }&gt;     3.0, 2.2
        C&lt;{ count =E&lt;gt&gt; -2, offset=E&lt;gt&gt; -3 }&gt;    2.2, 2.1

       Any combination of one option of &quot;since&quot; and &quot;from&quot; and one of &quot;until&quot;
       and &quot;to&quot; returns the intersection of the two results with only one of the
       options specified.

AUTHOR
       Frank Lichtenheld, &lt;frank@lichtenheld.de&gt; Rapha&#195;&#171;l Hertzog,
       &lt;hertzog@debian.org&gt;



1.16.16                            2015-04-09                 Dpkg::Changelog(3)

</pre></body></html>
