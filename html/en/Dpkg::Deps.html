<html>
<head><meta charset=utf-8/>
<title>Dpkg::Deps - parse and manipulate dependencies of Debian packages</title></head>
<body><pre>

Dpkg::Deps(3)                     libdpkg-perl                     Dpkg::Deps(3)



NAME
       Dpkg::Deps - parse and manipulate dependencies of Debian packages

DESCRIPTION
       The Dpkg::Deps module provides objects implementing various types of
       dependencies.

       The most important function is deps_parse(), it turns a dependency line
       in a set of Dpkg::Deps::{Simple,AND,OR,Union} objects depending on the
       case.

FUNCTIONS
       All the deps_* functions are exported by default.

       deps_eval_implication($rel_p, $v_p, $rel_q, $v_q)
           ($rel_p, $v_p) and ($rel_q, $v_q) express two dependencies as
           (relation, version). The relation variable can have the following
           values that are exported by Dpkg::Version: REL_EQ, REL_LT, REL_LE,
           REL_GT, REL_GT.

           This functions returns 1 if the &quot;p&quot; dependency implies the &quot;q&quot;
           dependency. It returns 0 if the &quot;p&quot; dependency implies that &quot;q&quot; is
           not satisfied. It returns undef when there&apos;s no implication.

           The $v_p and $v_q parameter should be Dpkg::Version objects.

       my $dep = deps_parse($line, %options)
           This function parses the dependency line and returns an object,
           either a Dpkg::Deps::AND or a Dpkg::Deps::Union. Various options can
           alter the behaviour of that function.

           use_arch (defaults to 1)
               Take into account the architecture restriction part of the
               dependencies.  Set to 0 to completely ignore that information.

           host_arch (defaults to the current architecture)
               Define the host architecture. By default it uses
               Dpkg::Arch::get_host_arch() to identify the proper architecture.

           reduce_arch (defaults to 0)
               If set to 1, ignore dependencies that do not concern the current
               host architecture. This implicitely strips off the architecture
               restriction list so that the resulting dependencies are directly
               applicable to the current architecture.

           union (defaults to 0)
               If set to 1, returns a Dpkg::Deps::Union instead of a
               Dpkg::Deps::AND. Use this when parsing non-dependency fields like
               Conflicts.

           build_dep (defaults to 0)
               If set to 1, allow build-dep only arch qualifiers, that is
               &#226;:native&#226;.  This should be set whenever working with build-deps.

       deps_compare($a, $b)
           Implements a comparison operator between two dependency objects.
           This function is mainly used to implement the sort() method.

OBJECTS - Dpkg::Deps::*
       There are several kind of dependencies. A Dpkg::Deps::Simple dependency
       represents a single dependency statement (it relates to one package
       only).  Dpkg::Deps::Multiple dependencies are built on top of this object
       and combine several dependencies in a different manners. Dpkg::Deps::AND
       represents the logical &quot;AND&quot; between dependencies while Dpkg::Deps::OR
       represents the logical &quot;OR&quot;. Dpkg::Deps::Multiple objects can contain
       Dpkg::Deps::Simple object as well as other Dpkg::Deps::Multiple objects.

       In practice, the code is only meant to handle the realistic cases which,
       given Debian&apos;s dependencies structure, imply those restrictions: AND can
       contain Simple or OR objects, OR can only contain Simple objects.

       Dpkg::Deps::KnownFacts is a special object that is used while evaluating
       dependencies and while trying to simplify them. It represents a set of
       installed packages along with the virtual packages that they might
       provide.

   Common functions
       $dep-&gt;is_empty()
           Returns true if the dependency is empty and doesn&apos;t contain any
           useful information. This is true when a Dpkg::Deps::Simple object has
           not yet been initialized or when a (descendant of)
           Dpkg::Deps::Multiple contains an empty list of dependencies.

       $dep-&gt;get_deps()
           Returns a list of sub-dependencies. For Dpkg::Deps::Simple it returns
           itself.

       $dep-&gt;output([$fh])
       &quot;$dep&quot;
           Returns a string representing the dependency. If $fh is set, it
           prints the string to the filehandle.

       $dep-&gt;implies($other_dep)
           Returns 1 when $dep implies $other_dep. Returns 0 when $dep implies
           NOT($other_dep). Returns undef when there&apos;s no implication. $dep and
           $other_dep do not need to be of the same type.

       $dep-&gt;sort()
           Sorts alphabetically the internal list of dependencies. It&apos;s a no-op
           for Dpkg::Deps::Simple objects.

       $dep-&gt;arch_is_concerned($arch)
           Returns true if the dependency applies to the indicated architecture.
           For multiple dependencies, it returns true if at least one of the
           sub-dependencies apply to this architecture.

       $dep-&gt;reduce_arch($arch)
           Simplifies the dependency to contain only information relevant to the
           given architecture. A Dpkg::Deps::Simple object can be left empty
           after this operation. For Dpkg::Deps::Multiple objects, the non-
           relevant sub-dependencies are simply removed.

           This trims off the architecture restriction list of
           Dpkg::Deps::Simple objects.

       $dep-&gt;get_evaluation($facts)
           Evaluates the dependency given a list of installed packages and a
           list of virtual packages provided. Those lists are part of the
           Dpkg::Deps::KnownFacts object given as parameters.

           Returns 1 when it&apos;s true, 0 when it&apos;s false, undef when some
           information is lacking to conclude.

       $dep-&gt;simplify_deps($facts, @assumed_deps)
           Simplifies the dependency as much as possible given the list of facts
           (see object Dpkg::Deps::KnownFacts) and a list of other dependencies
           that are known to be true.
&#12;       $dep-&gt;has_arch_restriction()
           For a simple dependency, returns the package name if the dependency
           applies only to a subset of architectures.  For multiple
           dependencies, it returns the list of package names that have such a
           restriction.

       $dep-&gt;reset()
           Clears any dependency information stored in $dep so that
           $dep-&gt;is_empty() returns true.

   Dpkg::Deps::Simple
       Such an object has four interesting properties:

       package
           The package name (can be undef if the dependency has not been
           initialized or if the simplification of the dependency lead to its
           removal).

       relation
           The relational operator: &quot;=&quot;, &quot;&lt;&lt;&quot;, &quot;&lt;=&quot;, &quot;&gt;=&quot; or &quot;&gt;&gt;&quot;. It can be
           undefined if the dependency had no version restriction. In that case
           the following field is also undefined.

       version
           The version.

       arches
           The list of architectures where this dependency is applicable. It&apos;s
           undefined when there&apos;s no restriction, otherwise it&apos;s an array ref.
           It can contain an exclusion list, in that case each architecture is
           prefixed with an exclamation mark.

       archqual
           The arch qualifier of the dependency (can be undef if there&apos;s none).
           In the dependency &quot;python:any (&gt;= 2.6)&quot;, the arch qualifier is &quot;any&quot;.

       Methods

       $simple_dep-&gt;parse_string(&quot;dpkg-dev (&gt;= 1.14.8) [!hurd-i386]&quot;)
           Parses the dependency and modifies internal properties to match the
           parsed dependency.

       $simple_dep-&gt;merge_union($other_dep)
           Returns true if $simple_dep could be modified to represent the union
           of both dependencies. Otherwise returns false.

   Dpkg::Deps::Multiple
       This is the base class for Dpkg::Deps::{AND,OR,Union}. It implements the
       following methods:

       $mul-&gt;add($dep)
           Adds a new dependency object at the end of the list.

   Dpkg::Deps::AND
       This object represents a list of dependencies who must be met at the same
       time.

       $and-&gt;output([$fh])
           The output method uses &quot;, &quot; to join the list of sub-dependencies.

   Dpkg::Deps::OR
       This object represents a list of dependencies of which only one must be
       met for the dependency to be true.

       $or-&gt;output([$fh])
           The output method uses &quot; | &quot; to join the list of sub-dependencies.
&#12;   Dpkg::Deps::Union
       This object represents a list of relationships.

       $union-&gt;output([$fh])
           The output method uses &quot;, &quot; to join the list of relationships.

       $union-&gt;implies($other_dep)
       $union-&gt;get_evaluation($other_dep)
           Those methods are not meaningful for this object and always return
           undef.

       $union-&gt;simplify_deps($facts)
           The simplication is done to generate an union of all the
           relationships.  It uses $simple_dep-&gt;merge_union($other_dep) to get
           its job done.

   Dpkg::Deps::KnownFacts
       This object represents a list of installed packages and a list of virtual
       packages provided (by the set of installed packages).

       my $facts = Dpkg::Deps::KnownFacts-&gt;new();
           Creates a new object.

       $facts-&gt;add_installed_package($package, $version, $arch, $multiarch)
           Records that the given version of the package is installed. If
           $version/$arch is undefined we know that the package is installed but
           we don&apos;t know which version/architecture it is. $multiarch is the
           Multi-Arch field of the package. If $multiarch is undef, it will be
           equivalent to &quot;Multi-Arch: no&quot;.

           Note that $multiarch is only used if $arch is provided.

       $facts-&gt;add_provided_package($virtual, $relation, $version, $by)
           Records that the &quot;$by&quot; package provides the $virtual package.
           $relation and $version correspond to the associated relation given in
           the Provides field. This might be used in the future for versioned
           provides.

       my ($check, $param) = $facts-&gt;check_package($package)
           $check is one when the package is found. For a real package, $param
           contains the version. For a virtual package, $param contains an array
           reference containing the list of packages that provide it (each
           package is listed as [ $provider, $relation, $version ]).

           This function is obsolete and should not be used.
           Dpkg::Deps::KnownFacts is only meant to be filled with data and then
           passed to Dpkg::Deps methods where appropriate, but it should not be
           directly queried.

CHANGES
   Version 1.01
       &#183;   Add new $dep-&gt;reset() method that all dependency objects support.

       &#183;   Dpkg::Deps::Simple now recognizes the arch qualifier &quot;any&quot; and stores
           it in the &quot;archqual&quot; property when present.

       &#183;   Dpkg::Deps::KnownFacts-&gt;add_installed_package() now accepts 2
           supplementary parameters ($arch and $multiarch).

       &#183;   Dpkg::Deps::KnownFacts-&gt;check_package() is obsolete, it should not
           have been part of the public API.



1.16.16                            2015-04-09                      Dpkg::Deps(3)

</pre></body></html>
