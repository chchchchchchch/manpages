<html>
<head><meta charset=utf-8/>
<title>Glib::MainLoop -  An event source manager</title></head>
<body><pre>

Glib::MainLoop(3pm)    User Contributed Perl Documentation   Glib::MainLoop(3pm)



NAME
       Glib::MainLoop -  An event source manager

DESCRIPTION
       Event-driven programs need some sort of loop which watches for events and
       launches the appropriate actions.  Glib::MainLoop provides this
       functionality.

       Mainloops have context, provided by the MainContext object.  For the most
       part you can use the default context (see &quot;default&quot;), but if you want to
       create a subcontext for a nested loop which doesn&apos;t have the same event
       sources, etc, you can.

       Event sources, attached to main contexts, watch for events to happen, and
       launch appropriate actions.  Glib provides a few ready-made event
       sources, the Glib::Timeout, Glib::Idle, and io watch
       (&quot;Glib::IO-&gt;add_watch&quot;).

       Under the hood, Gtk+ adds event sources for GdkEvents to dispatch events
       to your widgets.  In fact, Gtk2 provides an abstraction of Glib::MainLoop
       (See &quot;Gtk2-&gt;main&quot; and friends), so you may rarely have cause to use
       Glib::MainLoop directly.

       Note: As of version 1.080, the Glib module uses a custom event source to
       ensure that perl&apos;s safe signal handling and the glib polling event loop
       play nicely together.  It is no longer necessary to install a timeout to
       ensure that async signals get handled in a timely manner.

CONSTANTS
       &quot;SOURCE_REMOVE&quot; and &quot;SOURCE_CONTINUE&quot; are designed for use as the return
       values from timeout, idle and I/O watch source functions.  They return
       true to keep running or false to remove themselves.  These constants can
       help you get that the right way around.

           Glib::SOURCE_CONTINUE     # true
           Glib::SOURCE_REMOVE       # false

METHODS
   maincontext thingamabob = Glib::MainContext-&gt;new
   mainloop = Glib::MainLoop-&gt;new ($context=undef, $is_running=FALSE)
       &#183;   $context (Glib::MainContext thingamabob)

       &#183;   $is_running (boolean)

   integer = Glib::Timeout-&gt;add ($interval, $callback, $data=undef,
       $priority=G_PRIORITY_DEFAULT)
       &#183;   $interval (integer) number of milliseconds

       &#183;   $callback (subroutine)

       &#183;   $data (scalar)

       &#183;   $priority (integer)

       Run $callback every $interval milliseconds until $callback returns false.
       Returns a source id which may be used with &quot;Glib::Source-&gt;remove&quot;.  Note
       that a mainloop must be active for the timeout to execute.

   integer = Glib::Idle-&gt;add ($callback, $data=undef,
       $priority=G_PRIORITY_DEFAULT_IDLE)
       &#183;   $callback (subroutine)
&#12;       &#183;   $data (scalar)

       &#183;   $priority (integer)

       Run $callback when the mainloop is idle.  If $callback returns false, it
       will uninstall itself, otherwise, it will run again at the next idle
       iteration.  Returns a source id which may be used with
       &quot;Glib::Source-&gt;remove&quot;.

   integer = Glib::Timeout-&gt;add_seconds ($interval, $callback, $data=undef,
       $priority=G_PRIORITY_DEFAULT)
       &#183;   $interval (integer)

       &#183;   $callback (scalar)

       &#183;   $data (scalar)

       &#183;   $priority (integer)

       Since: glib 2.14

   integer = Glib::IO-&gt;add_watch ($fd, $condition, $callback, $data=undef,
       $priority=G_PRIORITY_DEFAULT)
       &#183;   $fd (integer) file descriptor, e.g. fileno($filehandle)

       &#183;   $condition (Glib::IOCondition)

       &#183;   $callback (subroutine)

       &#183;   $data (scalar)

       &#183;   $priority (integer)

       Run $callback when there is an event on $fd that matches $condition.  The
       watch uninstalls itself if $callback returns false.  Returns a source id
       that may be used with &quot;Glib::Source-&gt;remove&quot;.

       Glib&apos;s IO channels serve the same basic purpose as Perl&apos;s file handles,
       so for the most part you don&apos;t see GIOChannels in Perl.  The IO watch
       integrates IO operations with the main loop, which Perl file handles
       don&apos;t do.  For various reasons, this function requires raw file
       descriptors, not full file handles.  See &quot;fileno&quot; in perlfunc.

   maincontext thingamabob = $loop-&gt;get_context
   maincontext thingamabob = Glib::MainContext-&gt;default
   boolean = $context-&gt;is_owner
       Since: glib 2.12

   boolean = $loop-&gt;is_running
   boolean = $context-&gt;iteration ($may_block)
       &#183;   $may_block (boolean)

   integer = Glib::main_depth
       Find the current main loop recursion level.  This is handy in fringe
       situations, but those are very rare; see the C API reference for a more
       in-depth discussion.

       Since: glib 2.4

   boolean = $context-&gt;pending
   $loop-&gt;quit
   boolean = Glib::Source-&gt;remove ($tag)
       &#183;   $tag (integer)

       Remove an event source.  $tag is the number returned by things like
       &quot;Glib::Timeout-&gt;add&quot;, &quot;Glib::Idle-&gt;add&quot;, and &quot;Glib::IO-&gt;add_watch&quot;.

   $loop-&gt;run
   integer = Glib::Child-&gt;watch_add ($pid, $callback, $data=undef,
       $priority=G_PRIORITY_DEFAULT)
       &#183;   $pid (integer) child process ID

       &#183;   $callback (subroutine)

       &#183;   $data (scalar)

       &#183;   $priority (integer)

       Add a source to the default main context which will call

           &amp;$callback ($pid, $waitstatus, $data)

       when child process $pid terminates.  The return value is a source id
       which can be used with &quot;Glib::Source-&gt;remove&quot;.  When the callback is made
       the source is removed automatically.

       In a non-threaded program Glib implements this source by installing a
       SIGCHLD handler.  Don&apos;t change $SIG{CHLD} in Perl or the callback will
       never run.

       Since: glib 2.4

ENUMS AND FLAGS
   flags Glib::IOCondition
       &#183;   &apos;in&apos; / &apos;G_IO_IN&apos;

       &#183;   &apos;out&apos; / &apos;G_IO_OUT&apos;

       &#183;   &apos;pri&apos; / &apos;G_IO_PRI&apos;

       &#183;   &apos;err&apos; / &apos;G_IO_ERR&apos;

       &#183;   &apos;hup&apos; / &apos;G_IO_HUP&apos;

       &#183;   &apos;nval&apos; / &apos;G_IO_NVAL&apos;

SEE ALSO
       Glib

COPYRIGHT
       Copyright (C) 2003-2011 by the gtk2-perl team.

       This software is licensed under the LGPL.  See Glib for a full notice.



perl v5.14.2                       2012-05-24                Glib::MainLoop(3pm)

</pre></body></html>
