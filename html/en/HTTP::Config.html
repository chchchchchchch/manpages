<html>
<head><meta charset=utf-8/>
<title>HTTP::Config - Configuration for request and response objects</title></head>
<body><pre>

HTTP::Config(3pm)      User Contributed Perl Documentation     HTTP::Config(3pm)



NAME
       HTTP::Config - Configuration for request and response objects

SYNOPSIS
        use HTTP::Config;
        my $c = HTTP::Config-&gt;new;
        $c-&gt;add(m_domain =&gt; &quot;.example.com&quot;, m_scheme =&gt; &quot;http&quot;, verbose =&gt; 1);

        use HTTP::Request;
        my $request = HTTP::Request-&gt;new(GET =&gt; &quot;http://www.example.com&quot;);

        if (my @m = $c-&gt;matching($request)) {
           print &quot;Yadayada\n&quot; if $m[0]-&gt;{verbose};
        }

DESCRIPTION
       An &quot;HTTP::Config&quot; object is a list of entries that can be matched against
       request or request/response pairs.  Its purpose is to hold configuration
       data that can be looked up given a request or response object.

       Each configuration entry is a hash.  Some keys specify matching to occur
       against attributes of request/response objects.  Other keys can be used
       to hold user data.

       The following methods are provided:

       $conf = HTTP::Config-&gt;new
           Constructs a new empty &quot;HTTP::Config&quot; object and returns it.

       $conf-&gt;entries
           Returns the list of entries in the configuration object.  In scalar
           context returns the number of entries.

       $conf-&gt;empty
           Return true if there are no entries in the configuration object.
           This is just a shorthand for &quot;not $conf-&gt;entries&quot;.

       $conf-&gt;add( %matchspec, %other )
       $conf-&gt;add( \%entry )
           Adds a new entry to the configuration.  You can either pass separate
           key/value pairs or a hash reference.

       $conf-&gt;remove( %spec )
           Removes (and returns) the entries that have matches for all the
           key/value pairs in %spec.  If %spec is empty this will match all
           entries; so it will empty the configuation object.

       $conf-&gt;matching( $uri, $request, $response )
       $conf-&gt;matching( $uri )
       $conf-&gt;matching( $request )
       $conf-&gt;matching( $response )
           Returns the entries that match the given $uri, $request and $response
           triplet.

           If called with a single $request object then the $uri is obtained by
           calling its &apos;uri_canonical&apos; method.  If called with a single
           $response object, then the request object is obtained by calling its
           &apos;request&apos; method; and then the $uri is obtained as if a single
           $request was provided.

           The entries are returned with the most specific matches first.  In
           scalar context returns the most specific match or &quot;undef&quot; in none
           match.

       $conf-&gt;add_item( $item, %matchspec )
       $conf-&gt;remove_items( %spec )
       $conf-&gt;matching_items( $uri, $request, $response )
           Wrappers that hides the entries themselves.

   Matching
       The following keys on a configuration entry specify matching.  For all of
       these you can provide an array of values instead of a single value.  The
       entry matches if at least one of the values in the array matches.

       Entries that require match against a response object attribute will never
       match unless a response object was provided.

       m_scheme =&gt; $scheme
           Matches if the URI uses the specified scheme; e.g. &quot;http&quot;.

       m_secure =&gt; $bool
           If $bool is TRUE; matches if the URI uses a secure scheme.  If $bool
           is FALSE; matches if the URI does not use a secure scheme.  An
           example of a secure scheme is &quot;https&quot;.

       m_host_port =&gt; &quot;$hostname:$port&quot;
           Matches if the URI&apos;s host_port method return the specified value.

       m_host =&gt; $hostname
           Matches if the URI&apos;s host method returns the specified value.

       m_port =&gt; $port
           Matches if the URI&apos;s port method returns the specified value.

       m_domain =&gt; &quot;.$domain&quot;
           Matches if the URI&apos;s host method return a value that within the given
           domain.  The hostname &quot;www.example.com&quot; will for instance match the
           domain &quot;.com&quot;.

       m_path =&gt; $path
           Matches if the URI&apos;s path method returns the specified value.

       m_path_prefix =&gt; $path
           Matches if the URI&apos;s path is the specified path or has the specified
           path as prefix.

       m_path_match =&gt; $Regexp
           Matches if the regular expression matches the URI&apos;s path.  Eg.
           qr/\.html$/.

       m_method =&gt; $method
           Matches if the request method matches the specified value. Eg. &quot;GET&quot;
           or &quot;POST&quot;.

       m_code =&gt; $digit
       m_code =&gt; $status_code
           Matches if the response status code matches.  If a single digit is
           specified; matches for all response status codes beginning with that
           digit.

       m_proxy =&gt; $url
           Matches if the request is to be sent to the given Proxy server.

       m_media_type =&gt; &quot;*/*&quot;
       m_media_type =&gt; &quot;text/*&quot;
       m_media_type =&gt; &quot;html&quot;
       m_media_type =&gt; &quot;xhtml&quot;
       m_media_type =&gt; &quot;text/html&quot;
           Matches if the response media type matches.
&#12;           With a value of &quot;html&quot; matches if $response-&gt;content_is_html returns
           TRUE.  With a value of &quot;xhtml&quot; matches if $response-&gt;content_is_xhtml
           returns TRUE.

       m_uri__$method =&gt; undef
           Matches if the URI object provides the method.

       m_uri__$method =&gt; $string
           Matches if the URI&apos;s $method method returns the given value.

       m_header__$field =&gt; $string
           Matches if either the request or the response have a header $field
           with the given value.

       m_response_attr__$key =&gt; undef
       m_response_attr__$key =&gt; $string
           Matches if the response object has that key, or the entry has the
           given value.

SEE ALSO
       URI, HTTP::Request, HTTP::Response

COPYRIGHT
       Copyright 2008, Gisle Aas

       This library is free software; you can redistribute it and/or modify it
       under the same terms as Perl itself.



perl v5.14.2                       2012-02-15                  HTTP::Config(3pm)

</pre></body></html>
