<html>
<head><meta charset=utf-8/>
<title>Log::Log4perl::Config::Watch - Detect file changes</title></head>
<body><pre>

Config::Watch(3pm)     User Contributed Perl Documentation    Config::Watch(3pm)



NAME
       Log::Log4perl::Config::Watch - Detect file changes

SYNOPSIS
           use Log::Log4perl::Config::Watch;

           my $watcher = Log::Log4perl::Config::Watch-&gt;new(
                                 file            =&gt; &quot;/data/my.conf&quot;,
                                 check_interval  =&gt; 30,
                         );

           while(1) {
               if($watcher-&gt;change_detected()) {
                   print &quot;Change detected!\n&quot;;
               }
               sleep(1);
           }

DESCRIPTION
       This module helps detecting changes in files. Although it comes with the
       &quot;Log::Log4perl&quot; distribution, it can be used independently.

       The constructor defines the file to be watched and the check interval in
       seconds. Subsequent calls to &quot;change_detected()&quot; will

       &#183;   return a false value immediately without doing physical file checks
           if &quot;check_interval&quot; hasn&apos;t elapsed.

       &#183;   perform a physical test on the specified file if the number of
           seconds specified in &quot;check_interval&quot; have elapsed since the last
           physical check. If the file&apos;s modification date has changed since the
           last physical check, it will return a true value, otherwise a false
           value is returned.

       Bottom line: &quot;check_interval&quot; allows you to call the function
       &quot;change_detected()&quot; as often as you like, without paying the performing a
       significant performance penalty because file system operations are being
       performed (however, you pay the price of not knowing about file changes
       until &quot;check_interval&quot; seconds have elapsed).

       The module clearly distinguishes system time from file system time.  If
       your (e.g. NFS mounted) file system is off by a constant amount of time
       compared to the executing computer&apos;s clock, it&apos;ll just work fine.

       To disable the resource-saving delay feature, just set &quot;check_interval&quot;
       to 0 and &quot;change_detected()&quot; will run a physical file test on every call.

       If you already have the current time available, you can pass it on to
       &quot;change_detected()&quot; as an optional parameter, like in

           change_detected($time)

       which then won&apos;t trigger a call to &quot;time()&quot;, but use the value provided.

   SIGNAL MODE
       Instead of polling time and file changes, &quot;new()&quot; can be instructed to
       set up a signal handler. If you call the constructor like

           my $watcher = Log::Log4perl::Config::Watch-&gt;new(
                                 file    =&gt; &quot;/data/my.conf&quot;,
                                 signal  =&gt; &apos;HUP&apos;
                         );
&#12;       then a signal handler will be installed, setting the object&apos;s variable
       &quot;$self-&gt;{signal_caught}&quot; to a true value when the signal arrives.  Comes
       with all the problems that signal handlers go along with.

   TRIGGER CHECKS
       To trigger a physical file check on the next call to &quot;change_detected()&quot;
       regardless if &quot;check_interval&quot; has expired or not, call

           $watcher-&gt;force_next_check();

       on the watcher object.

   DETECT MOVED FILES
       The watcher can also be used to detect files that have moved. It will not
       only detect if a watched file has disappeared, but also if it has been
       replaced by a new file in the meantime.

           my $watcher = Log::Log4perl::Config::Watch-&gt;new(
               file           =&gt; &quot;/data/my.conf&quot;,
               check_interval =&gt; 30,
           );

           while(1) {
               if($watcher-&gt;file_has_moved()) {
                   print &quot;File has moved!\n&quot;;
               }
               sleep(1);
           }

       The parameters &quot;check_interval&quot; and &quot;signal&quot; limit the number of physical
       file system checks, simililarily as with &quot;change_detected()&quot;.

COPYRIGHT AND LICENSE
       Copyright 2002-2009 by Mike Schilli &lt;m@perlmeister.com&gt; and Kevin Goess
       &lt;cpan@goess.org&gt;.

       This library is free software; you can redistribute it and/or modify it
       under the same terms as Perl itself.



perl v5.10.1                       2010-07-21                 Config::Watch(3pm)

</pre></body></html>
