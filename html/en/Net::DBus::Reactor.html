<html>
<head><meta charset=utf-8/>
<title>Net::DBus::Reactor - application event loop</title></head>
<body><pre>

Net::DBus::Reactor(3pm)User Contributed Perl DocumentatioNet::DBus::Reactor(3pm)



NAME
       Net::DBus::Reactor - application event loop

SYNOPSIS
       Create and run an event loop:

          use Net::DBus::Reactor;
          my $reactor = Net::DBus::Reactor-&gt;main();

          $reactor-&gt;run();

       Manage some file handlers

          $reactor-&gt;add_read($fd,
                             Net::DBus::Callback-&gt;new(method =&gt; sub {
                                my $fd = shift;
                                ...read some data...
                             }, args =&gt; [$fd]));

          $reactor-&gt;add_write($fd,
                              Net::DBus::Callback-&gt;new(method =&gt; sub {
                                 my $fd = shift;
                                 ...write some data...
                              }, args =&gt; [$fd]));

       Temporarily (dis|en)able a handle

          # Disable
          $reactor-&gt;toggle_read($fd, 0);
          # Enable
          $reactor-&gt;toggle_read($fd, 1);

       Permanently remove a handle

          $reactor-&gt;remove_read($fd);

       Manage a regular timeout every 100 milliseconds

          my $timer = $reactor-&gt;add_timeout(100,
                                            Net::DBus::Callback-&gt;new(
                     method =&gt; sub {
                        ...process the alarm...
                     }));

       Temporarily (dis|en)able a timer

          # Disable
          $reactor-&gt;toggle_timeout($timer, 0);
          # Enable
          $reactor-&gt;toggle_timeout($timer, 1);

       Permanently remove a timer

          $reactor-&gt;remove_timeout($timer);

       Add a post-dispatch hook

          my $hook = $reactor-&gt;add_hook(Net::DBus::Callback-&gt;new(
                method =&gt; sub {
                   ... do some work...
                }));
&#12;       Remove a hook

          $reactor-&gt;remove_hook($hook);

DESCRIPTION
       This class provides a general purpose event loop for the purposes of
       multiplexing I/O events and timeouts in a single process. The underlying
       implementation is done using the select system call. File handles can be
       registered for monitoring on read, write and exception (out-of-band data)
       events. Timers can be registered to expire with a periodic frequency.
       These are implemented using the timeout parameter of the select system
       call.  Since this parameter merely represents an upper bound on the
       amount of time the select system call is allowed to sleep, the actual
       period of the timers may vary. Under normal load this variance is
       typically 10 milliseconds.  Finally, hooks may be registered which will
       be invoked on each iteration of the event loop (ie after processing the
       file events, or timeouts indicated by the select system call returning).

METHODS
       my $reactor = Net::DBus::Reactor-&gt;new();
           Creates a new event loop ready for monitoring file handles, or
           generating timeouts. Except in very unsual circumstances (examples of
           which I can&apos;t think up) it is not neccessary or desriable to
           explicitly create new reactor instances. Instead call the main method
           to get a handle to the singleton instance.

       $reactor = Net::DBus::Reactor-&gt;main;
           Return a handle to the singleton instance of the reactor. This is the
           recommended way of getting hold of a reactor, since it removes the
           need for modules to pass around handles to their privately created
           reactors.

       $reactor-&gt;manage($connection);
       $reactor-&gt;manage($server);
           Registers a &quot;Net::DBus::Binding::Connection&quot; or
           &quot;Net::DBus::Binding::Server&quot; object for management by the event loop.
           This basically involves hooking up the watch &amp; timeout callbacks to
           the event loop.  For connections it will also register a hook to
           invoke the &quot;dispatch&quot; method periodically.

       $reactor-&gt;run();
           Starts the event loop monitoring any registered file handles and
           timeouts. At least one file handle, or timer must have been
           registered prior to running the reactor, otherwise it will
           immediately exit. The reactor will run until all registered file
           handles, or timeouts have been removed, or disabled. The reactor can
           be explicitly stopped by calling the &quot;shutdown&quot; method.

       $reactor-&gt;shutdown();
           Explicitly shutdown the reactor after pending events have been
           processed.

       $reactor-&gt;step();
           Perform one iteration of the event loop, going to sleep until an
           event occurs on a registered file handle, or a timeout occurrs. This
           method is generally not required in day-to-day use.

       $reactor-&gt;add_read($fd, $callback[, $status]);
           Registers a file handle for monitoring of read events. The $callback
           parameter specifies either a code reference to a subroutine, or an
           instance of the &quot;Net::DBus::Callback&quot; object to invoke each time an
           event occurs. The optional $status parameter is a boolean value to
           specify whether the watch is initially enabled.

       $reactor-&gt;add_write($fd, $callback[, $status]);
           Registers a file handle for monitoring of write events. The $callback
           parameter specifies either a code reference to a subroutine, or an
           instance of the &quot;Net::DBus::Callback&quot; object to invoke each time an
           event occurs. The optional $status parameter is a boolean value to
           specify whether the watch is initially enabled.

       $reactor-&gt;add_exception($fd, $callback[, $status]);
           Registers a file handle for monitoring of exception events. The
           $callback parameter specifies either a code reference to a
           subroutine, or  an instance of the &quot;Net::DBus::Callback&quot; object to
           invoke each time an event occurs. The optional $status parameter is a
           boolean value to specify whether the watch is initially enabled.

       my $id = $reactor-&gt;add_timeout($interval, $callback, $status);
           Registers a new timeout to expire every $interval milliseconds. The
           $callback parameter specifies either a code reference to a
           subroutine, or an instance of the &quot;Net::DBus::Callback&quot; object to
           invoke each time the timeout expires. The optional $status parameter
           is a boolean value to specify whether the timeout is initially
           enabled. The return parameter is a unique identifier which can be
           used to later remove or disable the timeout.

       $reactor-&gt;remove_timeout($id);
           Removes a previously registered timeout specified by the $id
           parameter.

       $reactor-&gt;toggle_timeout($id, $status[, $interval]);
           Updates the state of a previously registered timeout specifed by the
           $id parameter. The $status parameter specifies whether the timeout is
           to be enabled or disabled, while the optional $interval parameter can
           be used to change the period of the timeout.

       my $id = $reactor-&gt;add_hook($callback[, $status]);
           Registers a new hook to be fired on each iteration of the event loop.
           The $callback parameter specifies  either a code reference to a
           subroutine, or an instance of the &quot;Net::DBus::Callback&quot; class to
           invoke. The $status parameter determines whether the hook is
           initially enabled, or disabled.  The return parameter is a unique id
           which should be used to later remove, or disable the hook.

       $reactor-&gt;remove_hook($id)
           Removes the previously registered hook identified by $id.

       $reactor-&gt;toggle_hook($id, $status)
           Updates the status of the previously registered hook identified by
           $id. The $status parameter determines whether the hook is to be
           enabled or disabled.

       $reactor-&gt;remove_read($fd);
       $reactor-&gt;remove_write($fd);
       $reactor-&gt;remove_exception($fd);
           Removes a watch on the file handle $fd.

       $reactor-&gt;toggle_read($fd, $status);
       $reactor-&gt;toggle_write($fd, $status);
       $reactor-&gt;toggle_exception($fd, $status);
           Updates the status of a watch on the file handle $fd.  The $status
           parameter species whether the watch is to be enabled or disabled.

SEE ALSO
       Net::DBus::Callback, Net::DBus::Connection, Net::DBus::Server

AUTHOR
       Daniel Berrange &lt;dan@berrange.com&gt;

COPYRIGHT
       Copyright 2004-2011 by Daniel Berrange



perl v5.14.2                       2011-06-30            Net::DBus::Reactor(3pm)

</pre></body></html>
