<html>
<head><meta charset=utf-8/>
<title>Net::DBus::Test::MockMessage - Fake a message object when unit testing</title></head>
<body><pre>

Net::DBus::Test::MockMeUsereContributed Perl DoNet::DBus::Test::MockMessage(3pm)



NAME
       Net::DBus::Test::MockMessage - Fake a message object when unit testing

SYNOPSIS
       Sending a message

         my $msg = new Net::DBus::Test::MockMessage;
         my $iterator = $msg-&gt;iterator;

         $iterator-&gt;append_byte(132);
         $iterator-&gt;append_int32(14241);

         $connection-&gt;send($msg);

DESCRIPTION
       This module provides a &quot;mock&quot; counterpart to the
       Net::DBus::Binding::Message class. It is basically a pure Perl fake
       message object providing the same contract as the real message object. It
       is intended for use internally by the testing APIs.

METHODS
       my $call = Net::DBus::Test::MockMessage-&gt;new_method_call( service_name =&gt;
       $service, object_path =&gt; $object, interface =&gt; $interface, method_name =&gt;
       $name);
           Create a message representing a call on the object located at the
           path &quot;object_path&quot; within the client owning the well-known name given
           by &quot;service_name&quot;. The method to be invoked has the name
           &quot;method_name&quot; within the interface specified by the &quot;interface&quot;
           parameter.

       my $msg = Net::DBus::Test::MockMessage-&gt;new_method_return( replyto =&gt;
       $method_call);
           Create a message representing a reply to the method call passed in
           the &quot;replyto&quot; parameter.

       my $signal = Net::DBus::Test::MockMessage-&gt;new_signal( object_path =&gt;
       $path, interface =&gt; $interface, signal_name =&gt; $name);
           Creates a new message, representing a signal [to be] emitted by the
           object located under the path given by the &quot;object_path&quot; parameter.
           The name of the signal is given by the &quot;signal_name&quot; parameter, and
           is scoped to the interface given by the &quot;interface&quot; parameter.

       my $msg = Net::DBus::Test::MockMessage-&gt;new_error( replyto =&gt;
       $method_call, name =&gt; $name, description =&gt; $description);
           Creates a new message, representing an error which occurred during
           the handling of the method call object passed in as the &quot;replyto&quot;
           parameter. The &quot;name&quot; parameter is the formal name of the error
           condition, while the &quot;description&quot; is a short piece of text giving
           more specific information on the error.

       my $type = $msg-&gt;get_type
           Retrieves the type code for this message. The returned value
           corresponds to one of the four
           &quot;Net::DBus::Test::MockMessage::MESSAGE_TYPE_*&quot; constants.

       my $name = $msg-&gt;get_error_name
           Returns the formal name of the error, as previously passed in via the
           &quot;name&quot; parameter in the constructor.

       my $interface = $msg-&gt;get_interface
           Retrieves the name of the interface targetted by this message,
           possibly an empty string if there is no applicable interface for this
           message.

       my $path = $msg-&gt;get_path
           Retrieves the object path associated with the message, possibly an
           empty string if there is no applicable object for this message.

       my $name = $msg-&gt;get_destination
           Retrieves the uniqe or well-known bus name for client intended to be
           the recipient of the message. Possibly returns an empty string if the
           message is being broadcast to all clients.

       my $name = $msg-&gt;get_sender
           Retireves the unique name of the client sending the message

       my $serial = $msg-&gt;get_serial
           Retrieves the unique serial number of this message. The number is
           guarenteed unique for as long as the connection over which the
           message was sent remains open. May return zero, if the message is yet
           to be sent.

       my $name = $msg-&gt;get_member
           For method calls, retrieves the name of the method to be invoked,
           while for signals, retrieves the name of the signal.

       $msg-&gt;set_sender($name)
           Set the name of the client sending the message. The name must be the
           unique name of the client.

       $msg-&gt;set_destination($name)
           Set the name of the intended recipient of the message. This is
           typically used for signals to switch them from broadcast to unicast.

       my $iterator = $msg-&gt;iterator;
           Retrieves an iterator which can be used for reading or writing fields
           of the message. The returned object is an instance of the
           &quot;Net::DBus::Binding::Iterator&quot; class.

       $boolean = $msg-&gt;get_no_reply()
           Gets the flag indicating whether the message is expecting a reply to
           be sent.

       $msg-&gt;set_no_reply($boolean)
           Toggles the flag indicating whether the message is expecting a reply
           to be sent. All method call messages expect a reply by default. By
           toggling this flag the communication latency is reduced by removing
           the need for the client to wait

       my @values = $msg-&gt;get_args_list
           De-marshall all the values in the body of the message, using the
           message signature to identify data types. The values are returned as
           a list.

       $msg-&gt;append_args_list(@values)
           Append a set of values to the body of the message. Values will be
           encoded as either a string, list or dictionary as appropriate to
           their Perl data type. For more specific data typing needs, the
           Net::DBus::Binding::Iterator object should be used instead.

       my $sig = $msg-&gt;get_signature
           Retrieves a string representing the type signature of the values
           packed into the body of the message.

AUTHOR
       Daniel P. Berrange

COPYRIGHT
       Copyright (C) 2005-2009 Daniel P. Berrange
&#12;SEE ALSO
       Net::DBus::Binding::Message, Net::DBus::Test::MockConnection,
       Net::DBus::Test::MockIterator



perl v5.14.2                       2011-06-30  Net::DBus::Test::MockMessage(3pm)

</pre></body></html>
