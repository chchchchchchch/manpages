<html>
<head><meta charset=utf-8/>
<title>Net::HTTP - Low-level HTTP connection (client)</title></head>
<body><pre>

Net::HTTP(3pm)         User Contributed Perl Documentation        Net::HTTP(3pm)



NAME
       Net::HTTP - Low-level HTTP connection (client)

SYNOPSIS
        use Net::HTTP;
        my $s = Net::HTTP-&gt;new(Host =&gt; &quot;www.perl.com&quot;) || die $@;
        $s-&gt;write_request(GET =&gt; &quot;/&quot;, &apos;User-Agent&apos; =&gt; &quot;Mozilla/5.0&quot;);
        my($code, $mess, %h) = $s-&gt;read_response_headers;

        while (1) {
           my $buf;
           my $n = $s-&gt;read_entity_body($buf, 1024);
           die &quot;read failed: $!&quot; unless defined $n;
           last unless $n;
           print $buf;
        }

DESCRIPTION
       The &quot;Net::HTTP&quot; class is a low-level HTTP client.  An instance of the
       &quot;Net::HTTP&quot; class represents a connection to an HTTP server.  The HTTP
       protocol is described in RFC 2616.  The &quot;Net::HTTP&quot; class supports
       &quot;HTTP/1.0&quot; and &quot;HTTP/1.1&quot;.

       &quot;Net::HTTP&quot; is a sub-class of &quot;IO::Socket::INET&quot;.  You can mix the
       methods described below with reading and writing from the socket
       directly.  This is not necessary a good idea, unless you know what you
       are doing.

       The following methods are provided (in addition to those of
       &quot;IO::Socket::INET&quot;):

       $s = Net::HTTP-&gt;new( %options )
           The &quot;Net::HTTP&quot; constructor method takes the same options as
           &quot;IO::Socket::INET&quot;&apos;s as well as these:

             Host:            Initial host attribute value
             KeepAlive:       Initial keep_alive attribute value
             SendTE:          Initial send_te attribute_value
             HTTPVersion:     Initial http_version attribute value
             PeerHTTPVersion: Initial peer_http_version attribute value
             MaxLineLength:   Initial max_line_length attribute value
             MaxHeaderLines:  Initial max_header_lines attribute value

           The &quot;Host&quot; option is also the default for &quot;IO::Socket::INET&quot;&apos;s
           &quot;PeerAddr&quot;.  The &quot;PeerPort&quot; defaults to 80 if not provided.

           The &quot;Listen&quot; option provided by &quot;IO::Socket::INET&quot;&apos;s constructor
           method is not allowed.

           If unable to connect to the given HTTP server then the constructor
           returns &quot;undef&quot; and $@ contains the reason.  After a successful
           connect, a &quot;Net:HTTP&quot; object is returned.

       $s-&gt;host
           Get/set the default value of the &quot;Host&quot; header to send.  The $host
           must not be set to an empty string (or &quot;undef&quot;) for HTTP/1.1.

       $s-&gt;keep_alive
           Get/set the keep-alive value.  If this value is TRUE then the request
           will be sent with headers indicating that the server should try to
           keep the connection open so that multiple requests can be sent.
&#12;           The actual headers set will depend on the value of the &quot;http_version&quot;
           and &quot;peer_http_version&quot; attributes.

       $s-&gt;send_te
           Get/set the a value indicating if the request will be sent with a
           &quot;TE&quot; header to indicate the transfer encodings that the server can
           choose to use.  The list of encodings announced as accepted by this
           client depends on availability of the following modules:
           &quot;Compress::Raw::Zlib&quot; for deflate, and &quot;IO::Compress::Gunzip&quot; for
           gzip.

       $s-&gt;http_version
           Get/set the HTTP version number that this client should announce.
           This value can only be set to &quot;1.0&quot; or &quot;1.1&quot;.  The default is &quot;1.1&quot;.

       $s-&gt;peer_http_version
           Get/set the protocol version number of our peer.  This value will
           initially be &quot;1.0&quot;, but will be updated by a successful
           read_response_headers() method call.

       $s-&gt;max_line_length
           Get/set a limit on the length of response line and response header
           lines.  The default is 8192.  A value of 0 means no limit.

       $s-&gt;max_header_length
           Get/set a limit on the number of header lines that a response can
           have.  The default is 128.  A value of 0 means no limit.

       $s-&gt;format_request($method, $uri, %headers, [$content])
           Format a request message and return it as a string.  If the headers
           do not include a &quot;Host&quot; header, then a header is inserted with the
           value of the &quot;host&quot; attribute.  Headers like &quot;Connection&quot; and
           &quot;Keep-Alive&quot; might also be added depending on the status of the
           &quot;keep_alive&quot; attribute.

           If $content is given (and it is non-empty), then a &quot;Content-Length&quot;
           header is automatically added unless it was already present.

       $s-&gt;write_request($method, $uri, %headers, [$content])
           Format and send a request message.  Arguments are the same as for
           format_request().  Returns true if successful.

       $s-&gt;format_chunk( $data )
           Returns the string to be written for the given chunk of data.

       $s-&gt;write_chunk($data)
           Will write a new chunk of request entity body data.  This method
           should only be used if the &quot;Transfer-Encoding&quot; header with a value of
           &quot;chunked&quot; was sent in the request.  Note, writing zero-length data is
           a no-op.  Use the write_chunk_eof() method to signal end of entity
           body data.

           Returns true if successful.

       $s-&gt;format_chunk_eof( %trailers )
           Returns the string to be written for signaling EOF when a
           &quot;Transfer-Encoding&quot; of &quot;chunked&quot; is used.

       $s-&gt;write_chunk_eof( %trailers )
           Will write eof marker for chunked data and optional trailers.  Note
           that trailers should not really be used unless is was signaled with a
           &quot;Trailer&quot; header.

           Returns true if successful.

       ($code, $mess, %headers) = $s-&gt;read_response_headers( %opts )
           Read response headers from server and return it.  The $code is the 3
           digit HTTP status code (see HTTP::Status) and $mess is the textual
           message that came with it.  Headers are then returned as key/value
           pairs.  Since key letter casing is not normalized and the same key
           can even occur multiple times, assigning these values directly to a
           hash is not wise.  Only the $code is returned if this method is
           called in scalar context.

           As a side effect this method updates the &apos;peer_http_version&apos;
           attribute.

           Options might be passed in as key/value pairs.  There are currently
           only two options supported; &quot;laxed&quot; and &quot;junk_out&quot;.

           The &quot;laxed&quot; option will make read_response_headers() more forgiving
           towards servers that have not learned how to speak HTTP properly.
           The &quot;laxed&quot; option is a boolean flag, and is enabled by passing in a
           TRUE value.  The &quot;junk_out&quot; option can be used to capture bad header
           lines when &quot;laxed&quot; is enabled.  The value should be an array
           reference.  Bad header lines will be pushed onto the array.

           The &quot;laxed&quot; option must be specified in order to communicate with
           pre-HTTP/1.0 servers that don&apos;t describe the response outcome or the
           data they send back with a header block.  For these servers
           peer_http_version is set to &quot;0.9&quot; and this method returns (200,
           &quot;Assumed OK&quot;).

           The method will raise an exception (die) if the server does not speak
           proper HTTP or if the &quot;max_line_length&quot; or &quot;max_header_length&quot; limits
           are reached.  If the &quot;laxed&quot; option is turned on and
           &quot;max_line_length&quot; and &quot;max_header_length&quot; checks are turned off, then
           no exception will be raised and this method will always return a
           response code.

       $n = $s-&gt;read_entity_body($buf, $size);
           Reads chunks of the entity body content.  Basically the same
           interface as for read() and sysread(), but the buffer offset argument
           is not supported yet.  This method should only be called after a
           successful read_response_headers() call.

           The return value will be &quot;undef&quot; on read errors, 0 on EOF, -1 if no
           data could be returned this time, otherwise the number of bytes
           assigned to $buf.  The $buf is set to &quot;&quot; when the return value is -1.

           You normally want to retry this call if this function returns either
           -1 or &quot;undef&quot; with $! as EINTR or EAGAIN (see Errno).  EINTR can
           happen if the application catches signals and EAGAIN can happen if
           you made the socket non-blocking.

           This method will raise exceptions (die) if the server does not speak
           proper HTTP.  This can only happen when reading chunked data.

       %headers = $s-&gt;get_trailers
           After read_entity_body() has returned 0 to indicate end of the entity
           body, you might call this method to pick up any trailers.

       $s-&gt;_rbuf
           Get/set the read buffer content.  The read_response_headers() and
           read_entity_body() methods use an internal buffer which they will
           look for data before they actually sysread more from the socket
           itself.  If they read too much, the remaining data will be left in
           this buffer.

       $s-&gt;_rbuf_length
           Returns the number of bytes in the read buffer.  This should always
           be the same as:

               length($s-&gt;_rbuf)

           but might be more efficient.

SUBCLASSING
       The read_response_headers() and read_entity_body() will invoke the
       sysread() method when they need more data.  Subclasses might want to
       override this method to control how reading takes place.

       The object itself is a glob.  Subclasses should avoid using hash key
       names prefixed with &quot;http_&quot; and &quot;io_&quot;.

SEE ALSO
       LWP, IO::Socket::INET, Net::HTTP::NB

COPYRIGHT
       Copyright 2001-2003 Gisle Aas.

       This library is free software; you can redistribute it and/or modify it
       under the same terms as Perl itself.



perl v5.14.2                       2012-02-16                     Net::HTTP(3pm)

</pre></body></html>
