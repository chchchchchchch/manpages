<html>
<head><meta charset=utf-8/>
<title>Parse::DebControl - Easy OO parsing of debian control-like files</title></head>
<body><pre>

Parse::DebControl(3pm) User Contributed Perl DocumentationParse::DebControl(3pm)



NAME
       Parse::DebControl - Easy OO parsing of debian control-like files

SYNOPSIS
               use Parse::DebControl

               $parser = new Parse::DebControl;

               $data = $parser-&gt;parse_mem($control_data, $options);
               $data = $parser-&gt;parse_file(&apos;./debian/control&apos;, $options);
               $data = $parser-&gt;parse_web($url, $options);

               $writer = new Parse::DebControl;

               $string = $writer-&gt;write_mem($singlestanza);
               $string = $writer-&gt;write_mem([$stanza1, $stanza2]);

               $writer-&gt;write_file($filename, $singlestanza, $options);
               $writer-&gt;write_file($filename, [$stanza1, $stanza2], $options);

               $writer-&gt;write_file($handle, $singlestanza, $options);
               $writer-&gt;write_file($handle, [$stanza1, $stanza2], $options);

               $parser-&gt;DEBUG();

DESCRIPTION
               Parse::DebControl is an easy OO way to parse debian control files and
               other colon separated key-value pairs. It&apos;s specifically designed
               to handle the format used in Debian control files, template files, and
               the cache files used by dpkg.

               For basic format information see:
               http://www.debian.org/doc/debian-policy/ch-controlfields.html#s-controlsyntax

               This module does not actually do any intelligence with the file content
               (because there are a lot of files in this format), but merely handles
               the format. It can handle simple control files, or files hundreds of lines
               long efficiently and easily.

   Class Methods
       &#183;   &quot;new()&quot;

       &#183;   &quot;new($debug)&quot;

           Returns a new Parse::DebControl object. If a true parameter $debug is
           passed in, it turns on debugging, similar to a call to &quot;DEBUG()&quot; (see
           below);

       &#183;   &quot;parse_file($control_filename,$options)&quot;

           Takes a filename as a scalar and an optional hashref of options (see
           below).  Will parse as much as it can, warning (if &quot;DEBUG&quot;ing is
           turned on) on parsing errors.

           Returns an array of hashrefs, containing the data in the control
           file, split up by stanza.  Stanzas are deliniated by newlines, and
           multi-line fields are expressed as such post-parsing.  Single periods
           are treated as special extra newline deliniators, per convention.
           Whitespace is also stripped off of lines as to make it less-easy to
           make mistakes with hand-written conf files).

           The options hashref can take parameters as follows. Setting the
           string to true enables the option.

                   useTieIxHash - Instead of an array of regular hashrefs, uses Tie::IxHash-
                           based hashrefs

                   discardCase  - Remove all case items from keys (not values)

                   stripComments - Remove all commented lines in standard #comment format.
                           Literal #&apos;s are represented by ##. For instance

                           Hello there #this is a comment
                           Hello there, I like ##CCCCCC as a grey.

                           The first is a comment, the second is a literal &quot;#&quot;.

                   verbMultiLine - Keep the description AS IS, and no not collapse leading
                           spaces or dots as newlines. This also keeps whitespace from being
                           stripped off the end of lines.

                   tryGzip - Attempt to expand the data chunk with gzip first. If the text is
                           already expanded (ie: plain text), parsing will continue normally.
                           This could optionally be turned on for all items in the future, but
                           it is off by default so we don&apos;t have to scrub over all the text for
                           performance reasons.

               singleBlock - Only parse the first block of data and return it. This is
                   useful when you have possible &quot;junk&quot; data after the metadata.

               strict - Tries to parse obeying the strict rules for real debian control files.
                   This will force comment stripping for debian/control (must start line) and for
                   other files will check if a field may span multiple lines.

               allowUnknownFields - In strict mode, allow unknown fields.

               type - If the strict option is chosen, then this parameter defines what format
                   we have. Available formats is:
                       - debian/control
                       - DEBIAN/control
                       - .dsc
                       - .changes

       &#183;   &quot;parse_mem($control_data, $options)&quot;

           Similar to &quot;parse_file&quot;, except takes data as a scalar. Returns the
           same array of hashrefs as &quot;parse_file&quot;. The options hashref is the
           same as &quot;parse_file&quot; as well; see above.

       &#183;   &quot;parse_web($url, $options)&quot;

           Similar to the other parse_* functions, this pulls down a control
           file from the web and attempts to parse it. For options and return
           values, see &quot;parse_file&quot;, above

       &#183;   &quot;write_file($filename, $data, $options)&quot;

       &#183;   &quot;write_file($handle, $data)&quot;

       &#183;   &quot;write_file($filename, [$data1, $data2, $data3], $options)&quot;

       &#183;   &quot;write_file($handle, [$data, $data2, $data3])&quot;

           This function takes a filename or a handle and writes the data out.
           The data can be given as a single hashref or as an arrayref of
           hashrefs. It will then write it out in a format that it can parse.
           The order is dependent on your hash sorting order. If you care, use
           Tie::IxHash.  Remember for reading back in, the module doesn&apos;t care.

           The $options hashref can contain one of the following two items:

                   addNewline - At the end of the last stanza, add an additional newline.
                   appendFile  - (default) Write to the end of the file
                   clobberFile - Overwrite the file given.
                   gzip - Compress the data with gzip before writing

           Since you determine the mode of your filehandle, passing it along
           with an options hashref obviously won&apos;t do anything; rather, it is
           ignored.

           The addNewline option solves a situation where if you are writing
           stanzas to a file in a loop (such as logging with this module), then
           the data will be streamed together, and won&apos;t parse back in
           correctly.  It is possible that this is the behavior that you want
           (if you wanted to write one key at a time), so it is optional.

           This function returns the number of bytes written to the file, undef
           otherwise.

       &#183;   &quot;write_mem($data)&quot;

       &#183;   &quot;write_mem([$data1,$data2,$data3])&quot;;

           This function works similarly to the &quot;write_file&quot; method, except it
           returns the control structure as a scalar, instead of writing it to a
           file.  There is no %options for this file (yet);

       &#183;   &quot;DEBUG()&quot;

           Turns on debugging. Calling it with no parameter or a true parameter
           turns on verbose &quot;warn()&quot;ings.  Calling it with a false parameter
           turns it off.  It is useful for nailing down any format or internal
           problems.

CHANGES
       Version 2.005 - January 13th, 2004

       &#183;   More generic test suite fix for earlier versions of Test::More

       &#183;   Updated copyright statement

       Version 2.004 - January 12th, 2004

       &#183;   More documentation formatting and typo fixes

       &#183;   CHANGES file now generated automatically

       &#183;   Fixes for potential test suite failure in Pod::Coverage run

       &#183;   Adds the &quot;addNewline&quot; option to write_file to solve the streaming
           stanza problem.

       &#183;   Adds tests for the addNewline option

       Version 2.003 - January 6th, 2004

       &#183;   Added optional Test::Pod test

       &#183;   Skips potential Win32 test failure in the module where it wants to
           write to /tmp.

       &#183;   Added optional Pod::Coverage test

       Version 2.002 - October 7th, 2003

       &#183;   No code changes. Fixes to test suite

       Version 2.001 - September 11th, 2003

       &#183;   Cleaned up more POD errors

       &#183;   Added tests for file writing

       &#183;   Fixed bug where write_file ignored the gzip parameter

       Version 2.0 - September 5th, 2003

       &#183;   Version increase.

       &#183;   Added gzip support (with the tryGzip option), so that compresses
           control files can be parsed on the fly

       &#183;   Added gzip support for writing of control files

       &#183;   Added parse_web to snag files right off the web. Useful for things
           such as apt&apos;s Sources.gz and Packages.gz

       Version 1.10b - September 2nd, 2003

       &#183;   Documentation fix for ## vs # in stripComments

       Version 1.10 - September 2nd, 2003

       &#183;   Documentation fixes, as pointed out by pudge

       &#183;   Adds a feature to stripComments where ## will get interpolated as a
           literal pound sign, as suggested by pudge.

       Version 1.9 - July 24th, 2003

       &#183;   Fix for warning for edge case (uninitialized value in chomp)

       &#183;   Tests for CRLF

       Version 1.8 - July 11th, 2003

       &#183;   By default, we now strip off whitespace unless verbMultiLine is in
           place.  This makes sense for things like conf files where trailing
           whitespace has no meaning. Thanks to pudge for reporting this.

       Version 1.7 - June 25th, 2003

       &#183;   POD documentation error noticed again by Frank Lichtenheld

       &#183;   Also by Frank, applied a patch to add a &quot;verbMultiLine&quot; option so
           that we can hand multiline fields back unparsed.

       &#183;   Slightly expanded test suite to cover new features

       Version 1.6.1 - June 9th, 2003

       &#183;   POD cleanups noticed by Frank Lichtenheld. Thank you, Frank.

       Version 1.6 - June 2nd, 2003

       &#183;   Cleaned up some warnings when you pass in empty hashrefs or arrayrefs

       &#183;   Added stripComments setting

       &#183;   Cleaned up POD errors
&#12;       Version 1.5 - May 8th, 2003

       &#183;   Added a line to quash errors with undef hashkeys and writing

       &#183;   Fixed the Makefile.PL to straighten up DebControl.pm being in the
           wrong dir

       Version 1.4 - April 30th, 2003

       &#183;   Removed exports as they were unnecessary. Many thanks to pudge, who
           pointed this out.

       Version 1.3 - April 28th, 2003

       &#183;   Fixed a bug where writing blank stanzas would throw a warning.  Fix
           found and supplied by Nate Oostendorp.

       Version 1.2b - April 25th, 2003

       Fixed:

       &#183;   A bug in the test suite where IxHash was not disabled in 40write.t.
           Thanks to Jeroen Latour from cpan-testers for the report.

       Version 1.2 - April 24th, 2003

       Fixed:

       &#183;   A bug in IxHash support where multiple stanzas might be out of order

       Version 1.1 - April 23rd, 2003

       Added:

       &#183;   Writing support

       &#183;   Tie::IxHash support

       &#183;   Case insensitive reading support

       Version 1.0 - April 23rd, 2003

       &#183;   This is the initial public release for CPAN, so everything is new.

BUGS
       The module will let you parse otherwise illegal key-value pairs and pairs
       with spaces. Badly formed stanzas will do things like overwrite duplicate
       keys, etc.  This is your problem.

       As of 1.10, the module uses advanced regexp&apos;s to figure out about
       comments.  If the tests fail, then stripComments won&apos;t work on your
       earlier perl version (should be fine on 5.6.0+)

TODO
       Change the name over to the Debian:: namespace, probably as
       Debian::ControlFormat.  This will happen as soon as the project that uses
       this module reaches stability, and we can do some minor tweaks.

COPYRIGHT
       Parse::DebControl is copyright 2003,2004 Jay Bonci &lt;jaybonci@cpan.org&gt;.
       This program is free software; you can redistribute it and/or modify it
       under the same terms as Perl itself.



perl v5.10.1                       2011-04-18             Parse::DebControl(3pm)

</pre></body></html>
