<html>
<head><meta charset=utf-8/>
<title>SGMLS - class for postprocessing the output from the sgmls and nsgmls parsers.</title></head>
<body><pre>

SGMLS(3pm)             User Contributed Perl Documentation            SGMLS(3pm)



NAME
       SGMLS - class for postprocessing the output from the sgmls and nsgmls
       parsers.

SYNOPSIS
         use SGMLS;

         my $parse = new SGMLS(STDIN);

         my $event = $parse-&gt;next_event;
         while ($event) {

           SWITCH: {

             ($event-&gt;type eq &apos;start_element&apos;) &amp;&amp; do {
               my $element = $event-&gt;data;    # An object of class SGMLS_Element
               [[your code for the beginning of an element]]
               last SWITCH;
             };

             ($event-&gt;type eq &apos;end_element&apos;) &amp;&amp; do {
               my $element = $event-&gt;data;    # An object of class SGMLS_Element
               [[your code for the end of an element]]
               last SWITCH;
             };

             ($event-&gt;type eq &apos;cdata&apos;) &amp;&amp; do {
               my $cdata = $event-&gt;data;      # A string
               [[your code for character data]]
               last SWITCH;
             };

             ($event-&gt;type eq &apos;sdata&apos;) &amp;&amp; do {
               my $sdata = $event-&gt;data;      # A string
               [[your code for system data]]
               last SWITCH;
             };

             ($event-&gt;type eq &apos;re&apos;) &amp;&amp; do {
               [[your code for a record end]]
               last SWITCH;
             };

             ($event-&gt;type eq &apos;pi&apos;) &amp;&amp; do {
               my $pi = $event-&gt;data;         # A string
               [[your code for a processing instruction]]
               last SWITCH;
             };

             ($event-&gt;type eq &apos;entity&apos;) &amp;&amp; do {
               my $entity = $event-&gt;data;     # An object of class SGMLS_Entity
               [[your code for an external entity]]
               last SWITCH;
             };

             ($event-&gt;type eq &apos;start_subdoc&apos;) &amp;&amp; do {
               my $entity = $event-&gt;data;     # An object of class SGMLS_Entity
               [[your code for the beginning of a subdoc entity]]
               last SWITCH;
             };

             ($event-&gt;type eq &apos;end_subdoc&apos;) &amp;&amp; do {
               my $entity = $event-&gt;data;     # An object of class SGMLS_Entity
               [[your code for the end of a subdoc entity]]
               last SWITCH;
             };
&#12;             ($event-&gt;type eq &apos;conforming&apos;) &amp;&amp; do {
               [[your code for a conforming document]]
               last SWITCH;
             };

             die &quot;Internal error: unknown event type &quot; . $event-&gt;type . &quot;\n&quot;;
           }

           $event = $parse-&gt;next_event;
         }

DESCRIPTION
       The SGMLS package consists of several related classes: see &quot;SGMLS&quot;,
       &quot;SGMLS_Event&quot;, &quot;SGMLS_Element&quot;, &quot;SGMLS_Attribute&quot;, &quot;SGMLS_Notation&quot;, and
       &quot;SGMLS_Entity&quot;.  All of these classes are available when you specify

         use SGMLS;

       Generally, the only object which you will create explicitly will belong
       to the &quot;SGMLS&quot; class; all of the others will then be created automati&#8208;
       cally for you over the course of the parse.  Much fuller documentation is
       available in the &quot;.sgml&quot; files in the &quot;DOC/&quot; directory of the &quot;SGMLS.pm&quot;
       distribution.

       The &quot;SGMLS&quot; class

       This class holds a single parse.  When you create an instance of it, you
       specify a file handle as an argument (if you are reading the output of
       sgmls or nsgmls from a pipe, the file handle will ordinarily be &quot;STDIN&quot;):

         my $parse = new SGMLS(STDIN);

       The most important method for this class is &quot;next_event&quot;, which reads and
       returns the next major event from the input stream.  It is important to
       note that the &quot;SGMLS&quot; class deals with most ESIS events itself:
       attributes and entity definitions, for example, are collected and stored
       automatically and invisibly to the user.  The following list contains all
       of the methods for the &quot;SGMLS&quot; class:

&quot;next_event()&quot;: Return an &quot;SGMLS_Event&quot; object containing the next major event
from the SGML parse.
&quot;element()&quot;: Return an &quot;SGMLS_Element&quot; object containing the current element in
the document.
&quot;file()&quot;: Return a string containing the name of the current SGML source file
(this will work only if the &quot;-l&quot; option was given to sgmls or nsgmls).
&quot;line()&quot;: Return a string containing the current line number from the source
file (this will work only if the &quot;-l&quot; option was given to sgmls or nsgmls).
&quot;appinfo()&quot;: Return a string containing the &quot;APPINFO&quot; parameter (if any) from
the SGML declaration.
&quot;notation(NNAME)&quot;: Return an &quot;SGMLS_Notation&quot; object representing the notation
named &quot;NNAME&quot;.  With newer versions of nsgmls, all notations are available; oth&#8208;
erwise, only the notations which are actually used will be available.
&quot;entity(ENAME)&quot;: Return an &quot;SGMLS_Entity&quot; object representing the entity named
&quot;ENAME&quot;.  With newer versions of nsgmls, all entities are available; otherwise,
only external data entities and internal entities used as attribute values will
be available.
&quot;ext()&quot;: Return a reference to an associative array for user-defined extensions.

The &quot;SGMLS_Event&quot; class

This class holds a single major event, as generated by the &quot;next_event&quot; method
in the &quot;SGMLS&quot; class.  It uses the following methods:

&quot;type()&quot;: Return a string describing the type of event: &quot;start_element&quot;,
&quot;end_element&quot;, &quot;cdata&quot;, &quot;sdata&quot;, &quot;re&quot;, &quot;pi&quot;, &quot;entity&quot;, &quot;start_subdoc&quot;, &quot;end_sub&#8208;
doc&quot;, and &quot;conforming&quot;.  See &quot;SYNOPSIS&quot;, above, for the values associated with
each of these.
&quot;data()&quot;: Return the data associated with the current event (if any).  For
&quot;start_element&quot; and &quot;end_element&quot;, returns an &quot;SGMLS_ELement&quot; object; for
&quot;entity&quot;, &quot;start_subdoc&quot;, and &quot;end_subdoc&quot;, returns an &quot;SGMLS_Entity&quot; object;
for &quot;cdata&quot;, &quot;sdata&quot;, and &quot;pi&quot;, returns a string; and for &quot;re&quot; and &quot;conforming&quot;,
returns the empty string.  See &quot;SYNOPSIS&quot;, above, for an example of this
method&apos;s use.
&quot;key()&quot;: Return a string key to the event, such as an element or entity name
(otherwise, the same as &quot;data()&quot;).
&quot;file()&quot;: Return the current file name, as in the &quot;SGMLS&quot; class.
&quot;line()&quot;: Return the current line number, as in the &quot;SGMLS&quot; class.
&quot;element()&quot;: Return the current element, as in the &quot;SGMLS&quot; class.
&quot;parse()&quot;: Return the &quot;SGMLS&quot; object which generated the event.
&quot;entity(ENAME)&quot;: Look up an entity, as in the &quot;SGMLS&quot; class.
&quot;notation(ENAME)&quot;: Look up a notation, as in the &quot;SGMLS&quot; class.
&quot;ext()&quot;: Return a reference to an associative array for user-defined extensions.

The &quot;SGMLS_Element&quot; class

This class is used for elements, and contains all associated information (such
as the element&apos;s attributes).  It recognises the following methods:

&quot;name()&quot;: Return a string containing the name, or Generic Identifier, of the
element, in upper case.
&quot;parent()&quot;: Return the &quot;SGMLS_Element&quot; object for the element&apos;s parent (if any).
&quot;parse()&quot;: Return the &quot;SGMLS&quot; object for the current parse.
&quot;attributes()&quot;: Return a reference to an associative array of attribute names
and &quot;SGMLS_Attribute&quot; structures.  Attribute names will be all in upper case.
&quot;attribute_names()&quot;: Return an array of strings containing the names of all
attributes defined for the current element, in upper case.
&quot;attribute(ANAME)&quot;: Return the &quot;SGMLS_Attribute&quot; structure for the attribute
&quot;ANAME&quot;.
&quot;set_attribute(ATTRIB)&quot;: Add the &quot;SGMLS_Attribute&quot; object &quot;ATTRIB&quot; to the cur&#8208;
rent element, replacing any other attribute structure with the same name.
&quot;in(GI)&quot;: Return &quot;true&quot; (ie. 1) if the string &quot;GI&quot; is the name of the current
element&apos;s parent, or &quot;false&quot; (ie. 0) if it is not.
&quot;within(GI)&quot;: Return &quot;true&quot; (ie. 1) if the string &quot;GI&quot; is the name of any of the
ancestors of the current element, or &quot;false&quot; (ie. 0) if it is not.
&quot;ext()&quot;: Return a reference to an associative array for user-defined extensions.

The &quot;SGMLS_Attribute&quot; class

Each instance of an attribute for each &quot;SGMLS_Element&quot; is an object belonging to
this class, which recognises the following methods:

&quot;name()&quot;: Return a string containing the name of the current attribute, all in
upper case.
&quot;type()&quot;: Return a string containing the type of the current attribute, all in
upper case.  Available types are &quot;IMPLIED&quot;, &quot;CDATA&quot;, &quot;NOTATION&quot;, &quot;ENTITY&quot;, and
&quot;TOKEN&quot;.
&quot;value()&quot;: Return the value of the current attribute, if any. This will be an
empty string if the type is &quot;IMPLIED&quot;, a string of some sort if the type is
&quot;CDATA&quot; or &quot;TOKEN&quot; (if it is &quot;TOKEN&quot;, you may want to split the string into a
series of separate tokens), an &quot;SGMLS_Notation&quot; object if the type is &quot;NOTA&#8208;
TION&quot;, or an &quot;SGMLS_Entity&quot; object if the type is &quot;ENTITY&quot;.  Note that if the
value is &quot;CDATA&quot;, it will not have escape sequences for 8-bit characters, record
ends, or SDATA processed -- that will be your responsibility.
&quot;is_implied()&quot;: Return &quot;true&quot; (ie. 1) if the value of the attribute is implied,
or &quot;false&quot; (ie. 0) if it is specified in the document.
&quot;set_type(TYPE)&quot;: Change the type of the attribute to the string &quot;TYPE&quot; (which
should be all in upper case).  Available types are &quot;IMPLIED&quot;, &quot;CDATA&quot;, &quot;NOTA&#8208;
TION&quot;, &quot;ENTITY&quot;, and &quot;TOKEN&quot;.
&quot;set_value(VALUE)&quot;: Change the value of the attribute to &quot;VALUE&quot;, which may be a
string, an &quot;SGMLS_Entity&quot; object, or an &quot;SGMLS_Notation&quot; subject, depending on
the attribute&apos;s type.
&quot;ext()&quot;: Return a reference to an associative array available for user-defined
extensions.

The &quot;SGMLS_Notation&quot; class

All declared notations appear as objects belonging to this class, which recog&#8208;
nises the following methods:

&quot;name()&quot;: Return a string containing the name of the notation.
&quot;sysid()&quot;: Return a string containing the system identifier of the notation, if
any.
&quot;pubid()&quot;: Return a string containing the public identifier of the notation, if
any.
&quot;ext()&quot;: Return a reference to an associative array available for user-defined
extensions.

The &quot;SGMLS_Entity&quot; class

All declared entities appear as objects belonging to this class, which recog&#8208;
nises the following methods:
&#12;&quot;name()&quot;: Return a string containing the name of the entity, in mixed case.
&quot;type()&quot;: Return a string containing the type of the entity, in upper case.
Available types are &quot;CDATA&quot;, &quot;SDATA&quot;, &quot;NDATA&quot; (external entities only), &quot;SUB&#8208;
DOC&quot;, &quot;PI&quot; (newer versions of nsgmls only), or &quot;TEXT&quot; (newer versions of nsgmls
only).
&quot;value()&quot;: Return a string containing the value of the entity, if it is inter&#8208;
nal.
&quot;sysid()&quot;: Return a string containing the system identifier of the entity (if
any), if it is external.
&quot;pubid()&quot;: Return a string containing the public identifier of the entity (if
any), if it is external.
&quot;filenames()&quot;: Return an array of strings containing any file names generated
from the identifiers, if the entity is external.
&quot;notation()&quot;: Return the &quot;SGMLS_Notation&quot; object associated with the entity, if
it is external.
&quot;data_attributes()&quot;: Return a reference to an associative array of data
attribute names (in upper case) and the associated &quot;SGMLS_Attribute&quot; objects for
the current entity.
&quot;data_attribute_names()&quot;: Return an array of data attribute names (in upper
case) for the current entity.
&quot;data_attribute(ANAME)&quot;: Return the &quot;SGMLS_Attribute&quot; object for the data
attribute named &quot;ANAME&quot; for the current entity.
&quot;set_data_attribute(ATTRIB)&quot;: Add the &quot;SGMLS_Attribute&quot; object &quot;ATTRIB&quot; to the
current entity, replacing any other data attribute with the same name.
&quot;ext()&quot;: Return a reference to an associative array for user-defined extensions.

AUTHOR AND COPYRIGHT
       Copyright 1994 and 1995 by David Megginson, &quot;dmeggins@aix1.uottawa.ca&quot;.
       Distributed under the terms of the Gnu General Public License (version 2,
       1991) -- see the file &quot;COPYING&quot; which is included in the SGMLS.pm distri&#8208;
       bution.

SEE ALSO:
       SGMLS::Output and SGMLS::Refs.



perl v5.8.8                        2004-02-22                         SGMLS(3pm)

</pre></body></html>
