<html>
<head><meta charset=utf-8/>
<title>SOAP::Lite::Packager - this class is an abstract class which allows for multiple types of packaging agents such as MIME and DIME.</title></head>
<body><pre>

SOAP::Lite::Packager(3pUser Contributed Perl DocumentatSOAP::Lite::Packager(3pm)



NAME
       SOAP::Lite::Packager - this class is an abstract class which allows for
       multiple types of packaging agents such as MIME and DIME.

DESCRIPTION
       The SOAP::Lite::Packager class is responsible for managing a set of
       &quot;parts.&quot; Parts are additional pieces of information, additional
       documents, or virtually anything that needs to be associated with the
       SOAP Envelope/payload. The packager then will take these parts and
       encode/decode or &quot;package&quot;/&quot;unpackage&quot; them as they come and go over the
       wire.

METHODS
       new Instantiates a new instance of a SOAP::Lite::Packager.

       parts
           Contains an array of parts. The contents of this array and their
           types are completely dependent upon the Packager being used. For
           example, when using MIME, the content of this array is
           MIME::Entity&apos;s.

       push_part
           Adds a part to set of parts managed by the current instance of
           SOAP::Lite::Packager.

       parser
           Returns the parser used to parse attachments out of a data stream.

       headers_http
           This is a hook into the HTTP layer. It provides a way for a packager
           to add and/or modify HTTP headers in a request/response. For example,
           most packaging layers will need to override the Content-Type (e.g.
           multipart/related, or application/dime).

ABSTRACT METHODS
       If you wish to implement your own SOAP::Lite::Packager, then the methods
       below must be implemented by you according to the prescribed input and
       output requirements.

       package()
           The &quot;package&quot; subroutine takes as input the SOAP envelope in
           string/SCALAR form.  This will serve as the content of the root part.
           The packager then encapsulates the envelope with the parts contained
           within &quot;parts&quot; and returns the properly encapsulated envelope in
           string/SCALAR form.

       unpackage()
           The &quot;unpackage&quot; subroutines takes as input raw data that needs to be
           parsed into a set of parts. It is responsible for extracting the
           envelope from the input, and populating &quot;parts&quot; with an ARRAY of
           parts extracted from the input. It then returns the SOAP Envelope in
           string/SCALAR form so that SOAP::Lite can parse it.

SUPPORTED PACKAGING FORMATS
   SOAP::Lite::Packager::MIME
       &quot;SOAP::Lite::Packager::MIME&quot; utilizes MIME::Tools to provides the ability
       to send and receive Multipart/Related and Multipart/Form-Data formatted
       requests and responses.

       MIME METHODS

       The following methods are used when composing a MIME formatted message.

       transfer_encoding
           The value of the root part&apos;s Content-Transfer-Encoding MIME Header.
           Default is: 8bit.

       env_id
           The value of the root part&apos;s Content-Id MIME Header. Default is:
           &lt;main_envelope&gt;.

       env_location
           The value of the root part&apos;s Content-Location MIME Header. Default
           is: /main_envelope.

       env_type
           The value of the root part&apos;s Content-Type MIME Header. Default is:
           text/xml.

       OPTIMIZING THE MIME PARSER

       The use of attachments can often result in a heavy drain on system
       resources depending upon how your MIME parser is configured. For example,
       you can instruct the parser to store attachments in memory, or to use
       temp files. Using one of the other can affect performance, disk
       utilization, and/or reliability. Therefore you should consult the
       following URL for optimization techniques and trade-offs:

       http://search.cpan.org/dist/MIME-tools/lib/MIME/Parser.pm#OPTIMIZING_YOUR_PARSER

       To modify the parser&apos;s configuration options consult the following code
       sample, which incidentally shows how to minimize memory utilization:

         my $packager = SOAP::Lite::Packager::MIME-&gt;new;
         # $packager-&gt;parser-&gt;decode_headers(1); # no difference
         # $packager-&gt;parser-&gt;extract_nested_messages(1); # no difference
         $packager-&gt;parser-&gt;output_to_core(0); # much less memory
         $packager-&gt;parser-&gt;tmp_to_core(0); # much less memory
         $packager-&gt;parser-&gt;tmp_recycling(0); # promotes faster garbage collection
         $packager-&gt;parser-&gt;use_inner_files(1); # no difference
         my $client = SOAP::Lite-&gt;uri($NS)-&gt;proxy($URL)-&gt;packager($packager);
         $client-&gt;someMethod();

       CLIENT SIDE EXAMPLE

       The following code sample shows how to use attachments within the context
       of a SOAP::Lite client.

         #!/usr/bin/perl
         use SOAP::Lite;
         use MIME::Entity;
         my $ent = build MIME::Entity
           Type        =&gt; &quot;text/plain&quot;,
           Path        =&gt; &quot;attachment.txt&quot;,
           Filename    =&gt; &quot;attachment.txt&quot;,
           Disposition =&gt; &quot;attachment&quot;;
         $NS = &quot;urn:Majordojo:TemperatureService&quot;;
         $HOST = &quot;http://localhost/cgi-bin/soaplite.cgi&quot;;
         my $client = SOAP::Lite
           -&gt;packager(SOAP::Lite::Packager::MIME-&gt;new)
           -&gt;parts([ $ent ])
           -&gt;uri($NS)
           -&gt;proxy($HOST);
         $response = $client-&gt;c2f(SOAP::Data-&gt;name(&quot;temperature&quot; =&gt; &apos;100&apos;));
         print $response-&gt;valueof(&apos;//c2fResponse/foo&apos;);

       SERVER SIDE EXAMPLE
&#12;       The following code shows how to use attachments within the context of a
       CGI script. It shows how to read incoming attachments, and to return
       attachments to the client.

         #!/usr/bin/perl -w
         use SOAP::Transport::HTTP;
         use MIME::Entity;
         SOAP::Transport::HTTP::CGI
           -&gt;packager(SOAP::Lite::Packager::MIME-&gt;new)
           -&gt;dispatch_with({&apos;urn:Majordojo:TemperatureService&apos; =&gt; &apos;TemperatureService&apos;})
           -&gt;handle;

         BEGIN {
           package TemperatureService;
           use vars qw(@ISA);
           @ISA = qw(Exporter SOAP::Server::Parameters);
           use SOAP::Lite;
           sub c2f {
             my $self = shift;
             my $envelope = pop;
             my $temp = $envelope-&gt;dataof(&quot;//c2f/temperature&quot;);
             use MIME::Entity;
             my $ent = build MIME::Entity
               Type        =&gt; &quot;text/plain&quot;,
               Path        =&gt; &quot;printenv&quot;,
               Filename    =&gt; &quot;printenv&quot;,
               Disposition =&gt; &quot;attachment&quot;;
             # read attachments
             foreach my $part (@{$envelope-&gt;parts}) {
               print STDERR &quot;soaplite.cgi: attachment found! (&quot;.ref($part).&quot;)\n&quot;;
               print STDERR &quot;soaplite.cgi: contents =&gt; &quot;.$part-&gt;stringify.&quot;\n&quot;;
             }
             # send attachments
             return SOAP::Data-&gt;name(&apos;convertedTemp&apos; =&gt; (((9/5)*($temp-&gt;value)) + 32)),
               $ent;
           }
         }

   SOAP::Lite::Packager::DIME
       TODO

SEE ALSO
       MIME::Tools, DIME::Tools

COPYRIGHT
       Copyright (C) 2000-2007 Paul Kulchenko. All rights reserved.

       This library is free software; you can redistribute it and/or modify it
       under the same terms as Perl itself.

AUTHORS
       Byrne Reese

       Martin Kutter &lt;martin.kutter fen-net.de&gt;



perl v5.12.4                       2010-06-03          SOAP::Lite::Packager(3pm)

</pre></body></html>
