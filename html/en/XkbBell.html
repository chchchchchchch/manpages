<html>
<head><meta charset=utf-8/>
<title>XkbBell - Rings the bell on the default keyboard</title></head>
<body><pre>

XkbBell(3)                        XKB FUNCTIONS                       XkbBell(3)



NAME
       XkbBell - Rings the bell on the default keyboard

SYNOPSIS
       Bool XkbBell (Display *display, Window window, int percent, Atom name);

ARGUMENTS
       - display
              connection to the X server

       - window
              event window, or None

       - percent
              relative volume, which can range from -100 to 100 inclusive

       - name a bell name, or NULL

DESCRIPTION
       The core X protocol allows only applications to explicitly sound the sys&#8208;
       tem bell with a given duration, pitch, and volume. Xkb extends this capa&#8208;
       bility  by  allowing  clients  to attach symbolic names to bells, disable
       audible bells, and receive an event whenever the keyboard bell  is  rung.
       For  the purposes of this document, the audible bell is defined to be the
       system bell, or the default keyboard bell, as opposed to any other  audi&#8208;
       ble  sound  generated  elsewhere  in  the system.  You can ask to receive
       XkbBellNotify events when any client rings any one of the following:


       &#183;    The default bell

       &#183;    Any bell on an input device that can be specified  by  a  bell_class
            and bell_id pair

       &#183;    Any  bell  specified  only  by an arbitrary name. (This is, from the
            server&apos;s point of view, merely a name, and not  connected  with  any
            physical  sound-generating device. Some client application must gen&#8208;
            erate the sound, or visual feedback, if any, that is associated with
            the name.)


       You  can  also  ask to receive XkbBellNotify events when the server rings
       the default bell or if any client has requested events only (without  the
       bell sounding) for any of the bell types previously listed.

       You  can  disable  audible bells on a global basis. For example, a client
       that replaces the keyboard bell with some other audible cue might want to
       turn off the AudibleBell control to prevent the server from also generat&#8208;
       ing a sound and avoid cacophony. If you disable audible bells and request
       to receive XkbBellNotify events, you can generate feedback different from
       the default bell.

       You can, however, override the AudibleBell control by calling one of  the
       functions that force the ringing of a bell in spite of the setting of the
       AudibleBell control - XkbForceDeviceBell or XkbForceBell.  In  this  case
       the server does not generate a bell event.

       Just  as  some  keyboards can produce keyclicks to indicate when a key is
       pressed or repeating, Xkb can provide feedback for the controls by  using
       special  beep codes. The AccessXFeedback control is used to configure the
       specific types of operations that generate feedback.
&#12;       Bell Names

       You can associate a name to an act of ringing a bell  by  converting  the
       name  to  an  Atom  and  then using this name when you call the functions
       listed in this chapter. If an event is generated as a result, the name is
       then  passed  to  all other clients interested in receiving XkbBellNotify
       events. Note that these are arbitrary names and that there is no  binding
       to  any  sounds. Any sounds or other effects (such as visual bells on the
       screen) must be generated by a client application  upon  receipt  of  the
       bell  event containing the name. There is no default name for the default
       keyboard bell. The server does generate some  predefined  bells  for  the
       AccessX  controls. These named bells are shown in Table 1 below; the name
       is included in any bell event sent to  clients  that  have  requested  to
       receive XkbBellNotify events.


       c  s  l  l  lW(4I)  l.  Table 1 Predefined Bells _ Action    Named Bell _
       Indicator turned on  AX_IndicatorOn Indicator turned off     AX_Indicato&#8208;
       rOff  More  than one indicator changed state   AX_IndicatorChange Control
       turned on  AX_FeatureOn Control turned off  AX_FeatureOff More  than  one
       control  changed  state    AX_FeatureChange  T{  SlowKeys  and BounceKeys
       about to  be  turned  on  or  off  T}   AX_SlowKeysWarning  SlowKeys  key
       pressed     AX_SlowKeyPress   SlowKeys  key  accepted    AX_SlowKeyAccept
       SlowKeys   key   rejected AX_SlowKeyReject    Accepted    SlowKeys    key
       released     AX_SlowKeyRelease  BounceKeys  key rejected  AX_BounceKeyRe&#8208;
       ject   StickyKeys    key    latched   AX_StickyLatch    StickyKeys    key
       locked    AX_StickyLock StickyKeys key unlocked  AX_StickyUnlock

       Audible Bells

       Using  Xkb  you can generate bell events that do not necessarily ring the
       system bell. This is useful if you need to use an audio server instead of
       the  system beep. For example, when an audio client starts, it could dis&#8208;
       able the audible bell (the system bell) and then listen for XkbBellNotify
       events.  When  it  receives a XkbBellNotify event, the audio client could
       then send a request to an audio server to play a sound.

       You can control the audible bells feature by passing the  XkbAudibleBell&#8208;
       Mask  to XkbChangeEnabledControls.  If you set XkbAudibleBellMask on, the
       server rings the system bell when  a  bell  event  occurs.  This  is  the
       default.  If  you set XkbAudibleBellMask off and a bell event occurs, the
       server does not ring the system bell unless you  call  XkbForceDeviceBell
       or XkbForceBell.

       Audible bells are also part of the per-client auto-reset controls.

       Bell Functions

       Use the functions described in this section to ring bells and to generate
       bell events.

       The input extension has two types of feedbacks that can generate bells  -
       bell  feedback  and keyboard feedback. Some of the functions in this sec&#8208;
       tion have bell_class and bell_id parameters; set  them  as  follows:  Set
       bell_class  to  BellFeedbackClass  or KbdFeedbackClass. A device can have
       more than one feedback of each type; set bell_id to the  particular  bell
       feedback of bell_class type.

       Table  2 shows the conditions that cause a bell to sound or an XkbBellNo&#8208;
       tifyEvent to be generated when a bell function is called.


       c s s s l l l l l l l l.  Table 2 Bell Sounding and Bell Event Generating
       _  Function  called     AudibleBell    Server  sounds  a  bell     Server
       sends an  XkbBellNotifyEvent  _  XkbDeviceBell  On   Yes  Yes  XkbDevice&#8208;
       Bell  Off  No   Yes  XkbBell   On   Yes  Yes XkbBell   Off  No   Yes Xkb&#8208;
       DeviceBellEvent  On or Off    No   Yes XkbBellEvent   On or  Off No   Yes
       XkbDeviceForceBell  On or Off Yes  No XkbForceBell   On or Off Yes  No

       If a compatible keyboard extension isn&apos;t present in the X server, XkbBell
       calls XBell with the specified display and percent,  and  returns  False.
       Otherwise,  XkbBell  calls XkbDeviceBell with the specified display, win&#8208;
       dow, percent, and name, a device_spec of XkbUseCoreKbd, a  bell_class  of
       XkbDfltXIClass, and a bell_id of XkbDfltXIId, and returns True.

       If  you have disabled the audible bell, the server does not ring the sys&#8208;
       tem bell, although it does generate a XkbBellNotify event.

       You can call XkbBell without first initializing the keyboard extension.

RETURN VALUES
       FALSE          The XkbBell function returns FALSE if XlibDisplayNoXkb  is
                      set.

STRUCTURES
       Xkb generates XkbBellNotify events for all bells except for those result&#8208;
       ing from  calls  to  XkbForceDeviceBell  and  XkbForceBell.   To  receive
       XkbBellNotify  events  under all possible conditions, pass XkbBellNotify&#8208;
       Mask in both the bits_to_change and values_for_bits parameters to  XkbSe&#8208;
       lectEvents.

       The XkbBellNotify event has no event details. It is either selected or it
       is not.  However, you can call XkbSelectEventDetails using  XkbBellNotify
       as  the  event_type and specifying XkbAllBellNotifyMask in bits_to_change
       and values_for_bits.  This has the  same  effect  as  a  call  to  XkbSe&#8208;
       lectEvents.

       The structure for the XkbBellNotify event type contains:

          typedef struct _XkbBellNotify {
              int            type;        /&#8727; Xkb extension base event code */
              unsigned long  serial;      /&#8727; X server serial number for event */
              Bool           send_event;  /&#8727; True =&gt; synthetically generated */
              Display *      display;     /&#8727; server connection where event generated */
              Time           time;        /&#8727; server time when event generated */
              int            xkb_type;    /&#8727; XkbBellNotify */
              unsigned int   device;      /&#8727; Xkb device ID, will not be XkbUseCoreKbd
       */
              int            percent;     /&#8727; requested volume as % of max */
              int            pitch;       /&#8727; requested pitch in Hz */
              int            duration;    /&#8727; requested duration in microseconds */
              unsigned int   bell_class;  /&#8727; X input extension feedback class */
              unsigned int   bell_id;     /&#8727; X input extension feedback ID */
              Atom           name;        /&#8727; &quot;name&quot; of requested bell */
              Window         window;      /&#8727; window associated with event */
              Bool           event_only;  /&#8727; False -&gt; the server did not produce a beep
       */
          } XkbBellNotifyEvent;

       If  your application needs to generate visual bell feedback on the screen
       when it receives a bell event, use the  window  ID  in  the  XkbBellNoti&#8208;
       fyEvent, if present.


SEE ALSO
       XBell(3),   XkbBellNotify(3),   XkbChangeEnabledControls(3),   XkbDevice&#8208;
       Bell(3), XkbForceBell(3), XkbForceDeviceBell(3), XkbUseCoreKbd(3)
&#12;


X Version 11                      libX11 1.5.0                        XkbBell(3)

</pre></body></html>
