<html>
<head><meta charset=utf-8/>
<title>XkbSetCompatMap - Modify the server's compatibility map</title></head>
<body><pre>

XkbSetCompatMap(3)                XKB FUNCTIONS               XkbSetCompatMap(3)



NAME
       XkbSetCompatMap - Modify the server&apos;s compatibility map

SYNOPSIS
       Bool  XkbSetCompatMap  (Display  *display, unsigned int which, XkbDescPtr
              xkb, Bool update_actions);

ARGUMENTS
       - display
              connection to server

       - which
              mask of compat map components to set

       - xkb  source for compat map components

       - update_actions
              True =&gt; apply to server&apos;s keyboard map

DESCRIPTION
       To modify the server&apos;s compatibility map, first modify a  local  copy  of
       the Xkb compatibility map, then call XkbSetCompatMap.  You may allocate a
       new compatibility map for this purpose using XkbAllocCompatMap.  You  may
       also  use  a  compatibility map from another server, although you need to
       adjust the device_spec field in the  XkbDescRec  accordingly.  Note  that
       symbol interpretations in a compatibility map ( sym_interpret, the vector
       of XkbSymInterpretRec structures) are  also  allocated  using  this  same
       function.

       XkbSetCompatMap  copies  compatibility  map information from the keyboard
       description in xkb to the server specified in display  device_spec  field
       of  xkb.   Unless  you  have  specifically modified this field, it is the
       default keyboard device.  which specifies the  compatibility  map  compo&#8208;
       nents to be set, and is an inclusive OR of the bits shown in Table 1.


       c  s  s  l  l  l l l lw(3i).  Table 1 Compatibility Map Component Masks _
       Mask Value     Affecting _ XkbSymInterpMask    (1&lt;&lt;0)    Symbol interpre&#8208;
       tations     XkbGroupCompatMask  (1&lt;&lt;1)    Group     maps    XkbAllCompat&#8208;
       Mask    (0x3)     All compatibility map components

       After updating  its  compatibility  map  for  the  specified  device,  if
       update_actions  is  True, the server applies the new compatibility map to
       its entire keyboard for the device to generate a new set  of  key  seman&#8208;
       tics, compatibility state, and a new core keyboard map. If update_actions
       is False, the new compatibility map is not used to generate any modifica&#8208;
       tions  to  the current device semantics, state, or core keyboard map. One
       reason for not applying the compatibility map immediately would be if one
       server  was  being  configured to match another on a piecemeal basis; the
       map should not be applied until everything is updated. To force an update
       at  a  later  time,  use  XkbSetCompatMap  specifying  which  as zero and
       update_actions as True.

       XkbSetCompatMap returns True if successful and False if unsuccessful. The
       server may report problems it encounters when processing the request sub&#8208;
       sequently via protocol errors.

RETURN VALUES
       True           The XkbSetCompatMap function returns True if successful.

       False          The XkbSetCompatMap function returns False  if  unsuccess&#8208;
                      ful.

STRUCTURES
       The  complete  description  of an Xkb keyboard is given by an XkbDescRec.
       The component structures in the XkbDescRec represent the major Xkb compo&#8208;
       nents.

       typedef struct {
          struct _XDisplay * display;      /&#8727; connection to X server */
          unsigned short     flags;        /&#8727; private to Xkb, do not modify */
          unsigned short     device_spec;  /&#8727; device of interest */
          KeyCode            min_key_code; /&#8727; minimum keycode for device */
          KeyCode            max_key_code; /&#8727; maximum keycode for device */
          XkbControlsPtr     ctrls;        /&#8727; controls */
          XkbServerMapPtr    server;       /&#8727; server keymap */
          XkbClientMapPtr    map;          /&#8727; client keymap */
          XkbIndicatorPtr    indicators;   /&#8727; indicator map */
          XkbNamesPtr        names;        /&#8727; names for all components */
          XkbCompatMapPtr    compat;       /&#8727; compatibility map */
          XkbGeometryPtr     geom;         /&#8727; physical geometry of keyboard */
       } XkbDescRec, *XkbDescPtr;

       The  display  field  points to an X display structure. The flags field is
       private to the library: modifying flags may yield unpredictable  results.
       The  device_spec  field  specifies  the device identifier of the keyboard
       input device, or XkbUseCoreKeyboard, which specifies  the  core  keyboard
       device.  The  min_key_code  and max_key_code fields specify the least and
       greatest keycode that can be returned by the keyboard.

       Each structure component has a corresponding mask bit  that  is  used  in
       function  calls  to  indicate that the structure should be manipulated in
       some manner, such as allocating it or freeing it. These masks  and  their
       relationships to the fields in the XkbDescRec are shown in Table 2.


       c  s  s l l l l l l.  Table 2 Mask Bits for XkbDescRec _ Mask Bit  XkbDe&#8208;
       scRec Field Value _  XkbControlsMask     ctrls     (1L&lt;&lt;0)  XkbServerMap&#8208;
       Mask    server    (1L&lt;&lt;1)   XkbIClientMapMask   map  (1L&lt;&lt;2)   XkbIndica&#8208;
       torMapMask indicators     (1L&lt;&lt;3)  XkbNamesMask   names     (1L&lt;&lt;4)  Xkb&#8208;
       CompatMapMask    compat    (1L&lt;&lt;5)       XkbGeometryMask     geom (1L&lt;&lt;6)
       XkbAllComponentsMask     All Fields     (0x7f)

       The XkbSymInterpretRec structure specifies a symbol interpretation:

           typedef struct {
               KeySym        sym;         /&#8727; keysym of interest or NULL */
               unsigned char flags;       /&#8727; XkbSI_AutoRepeat, XkbSI_LockingKey */
               unsigned char match;       /&#8727; specifies how mods is interpreted */
               unsigned char mods;        /&#8727; modifier bits, correspond to eight real modifiers */
               unsigned char virtual_mod; /&#8727; 1 modifier to add to key virtual mod map */
               XkbAnyAction  act;         /&#8727; action to bind to symbol position on key */
           } XkbSymInterpretRec,*XkbSymInterpretPtr;


SEE ALSO
       XkbAllocCompatMap(3)



X Version 11                      libX11 1.5.0                XkbSetCompatMap(3)

</pre></body></html>
