<html>
<head><meta charset=utf-8/>
<title>brctl - ethernet bridge administration</title></head>
<body><pre>

BRCTL(8)                                                                BRCTL(8)



NAME
       brctl - ethernet bridge administration

SYNOPSIS
       brctl [command]

DESCRIPTION
       brctl  is  used to set up, maintain, and inspect the ethernet bridge con&#8208;
       figuration in the linux kernel.

       An ethernet bridge is a device commonly used to  connect  different  net&#8208;
       works  of  ethernets together, so that these ethernets will appear as one
       ethernet to the participants.

       Each of the ethernets being connected corresponds to one physical  inter&#8208;
       face  in the bridge. These individual ethernets are bundled into one big&#8208;
       ger (&apos;logical&apos;) ethernet, this bigger ethernet corresponds to the  bridge
       network interface.



INSTANCES
       The  command  brctl  addbr  &lt;name&gt; creates a new instance of the ethernet
       bridge. The network interface corresponding to the bridge will be  called
       &lt;name&gt;.

       The  command brctl delbr &lt;name&gt; deletes the instance &lt;name&gt; of the ether&#8208;
       net bridge. The network interface corresponding to  the  bridge  must  be
       down before it can be deleted!

       The  command  brctl  show  shows  all  current  instances of the ethernet
       bridge.



PORTS
       Each bridge has a number of ports attached to it. Network traffic  coming
       in  on  any of these ports will be forwarded to the other ports transpar&#8208;
       ently, so that the bridge is invisible to the rest of the  network  (i.e.
       it will not show up in traceroute(8) ).

       The  command  brctl  addif  &lt;brname&gt;  &lt;ifname&gt;  will  make  the interface
       &lt;ifname&gt; a port of the  bridge  &lt;brname&gt;.  This  means  that  all  frames
       received  on  &lt;ifname&gt;  will  be processed as if destined for the bridge.
       Also, when sending frames on &lt;brname&gt;, &lt;ifname&gt; will be considered  as  a
       potential output interface.

       The  command  brctl  delif  &lt;brname&gt;  &lt;ifname&gt;  will detach the interface
       &lt;ifname&gt; from the bridge &lt;brname&gt;.

       The command brctl show &lt;brname&gt; will show some information on the  bridge
       and its attached ports.



AGEING
       The  bridge  keeps track of ethernet addresses seen on each port. When it
       needs to forward a frame, and it happens to know on which port the desti&#8208;
       nation  ethernet  address  (specified  in  the  frame) is located, it can
       &apos;cheat&apos; by forwarding the frame to that port only, thus saving a  lot  of
       redundant copies and transmits.
&#12;       However,  the ethernet address location data is not static data. Machines
       can move to other ports, network cards can be replaced (which changes the
       machine&apos;s ethernet address), etc.

       brctl  showmacs  &lt;brname&gt;  shows a list of learned MAC addresses for this
       bridge.

       brctl setageing &lt;brname&gt; &lt;time&gt; sets the ethernet  (MAC)  address  ageing
       time,  in seconds. After &lt;time&gt; seconds of not having seen a frame coming
       from a certain address, the bridge will time out  (delete)  that  address
       from the Forwarding DataBase (fdb).

       brctl  setgcint  &lt;brname&gt; &lt;time&gt; sets the garbage collection interval for
       the bridge &lt;brname&gt; to &lt;time&gt; seconds. This means that  the  bridge  will
       check the forwarding database for timed out entries every &lt;time&gt; seconds.



SPANNING TREE PROTOCOL
       Multiple  ethernet  bridges  can work together to create even larger net&#8208;
       works of ethernets using the IEEE 802.1d  spanning  tree  protocol.  This
       protocol is used for finding the shortest path between two ethernets, and
       for eliminating loops from the topology. As this protocol is a  standard,
       linux bridges will interwork properly with other third party bridge prod&#8208;
       ucts. Bridges communicate with each other by sending and receiving  BPDUs
       (Bridge  Protocol Data Units). These BPDUs can be recognised by an ether&#8208;
       net destination address of 01:80:c2:00:00:00.

       The spanning tree protocol can also be turned off (for  those  situations
       where  it just doesn&apos;t make sense, for example when this linux box is the
       only bridge on the LAN, or when you know that there are no loops  in  the
       topology.)

       brctl(8)  can  be  used  for  configuring  certain spanning tree protocol
       parameters. For an explanation of these parameters, see the  IEEE  802.1d
       specification  (or  send  me an email). The default values should be just
       fine. If you don&apos;t know what these parameters mean,  you  probably  won&apos;t
       feel the desire to tweak them.

       brctl  stp &lt;bridge&gt; &lt;state&gt; controls this bridge instance&apos;s participation
       in the spanning tree protocol. If &lt;state&gt; is &quot;on&quot; or &quot;yes&quot; the  STP  will
       be  turned  on,  otherwise  it  will be turned off.  When turned off, the
       bridge will not send or receive BPDUs, and will thus not  participate  in
       the  spanning  tree protocol. If your bridge isn&apos;t the only bridge on the
       LAN, or if there are loops in the LAN&apos;s topology, DO NOT turn this option
       off. If you turn this option off, please know what you are doing.


       brctl  setbridgeprio  &lt;bridge&gt;  &lt;priority&gt;  sets the bridge&apos;s priority to
       &lt;priority&gt;. The priority value is an unsigned 16-bit quantity  (a  number
       between  0  and  65535),  and has no dimension. Lower priority values are
       &apos;better&apos;. The bridge with the  lowest  priority  will  be  elected  &apos;root
       bridge&apos;.

       brctl  setfd  &lt;bridge&gt; &lt;time&gt; sets the bridge&apos;s &apos;bridge forward delay&apos; to
       &lt;time&gt; seconds.

       brctl sethello &lt;bridge&gt; &lt;time&gt; sets the bridge&apos;s &apos;bridge hello  time&apos;  to
       &lt;time&gt; seconds.

       brctl  setmaxage  &lt;bridge&gt; &lt;time&gt; sets the bridge&apos;s &apos;maximum message age&apos;
       to &lt;time&gt; seconds.

       brctl setpathcost &lt;bridge&gt; &lt;port&gt; &lt;cost&gt; sets the port cost of  the  port
       &lt;port&gt; to &lt;cost&gt;. This is a dimensionless metric.
&#12;       brctl  setportprio &lt;bridge&gt; &lt;port&gt; &lt;priority&gt; sets the port &lt;port&gt;&apos;s pri&#8208;
       ority to &lt;priority&gt;. The priority value is an unsigned 8-bit quantity  (a
       number  between  0 and 255), and has no dimension. This metric is used in
       the designated port and root port selection algorithms.



NOTES
       brctl(8) replaces the older brcfg tool.


SEE ALSO
       ipchains(8), iptables(8)


AUTHOR
       Lennert Buytenhek &lt;buytenh@gnu.org&gt;



                                November 7, 2001                        BRCTL(8)

</pre></body></html>
