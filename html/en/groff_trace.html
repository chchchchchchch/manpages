<html>
<head><meta charset=utf-8/>
<title>groff_trace - groff macro package trace.tmac</title></head>
<body><pre>

GROFF_TRACE(7)                                                    GROFF_TRACE(7)



NAME
       groff_trace - groff macro package trace.tmac

SYNOPSIS
       groff -m trace [options ...] [files ...]

DESCRIPTION
       The  trace macro package of groff(1) can be a valuable tool for debugging
       documents written in the roff formatting language.  A call stack trace is
       protocolled  on  standard error, this is, a diagnostic message is emitted
       on entering and exiting of a macro call.  This  greatly  eases  to  track
       down an error in some macro.

       This  tracing  process is activated by specifying the groff or troff com&#8208;
       mand line option -m trace.  This works also with  the  groffer(1)  viewer
       program.   A  finer  control  can be obtained by including the macro file
       within the document by the groff macro call .mso trace.tmac.  Only macros
       that are defined after this line are traced.

       If  command  line option -r trace-full=1 is given (or if this register is
       set in the document), number and  string  register  assignments  together
       with some other requests are traced also.

       If some other macro package should be traced as well it must be specified
       after -m trace on the command line.

       The macro file trace.tmac is unusual because  it  does  not  contain  any
       macros  to  be  called by a user.  Instead, the existing macro definition
       and appending facilities are modified such that they  display  diagnostic
       messages.

EXAMPLES
       In the following examples, a roff fragment is fed into groff via standard
       input.  As we are only interested in the  diagnostic  messages  (standard
       error)  on the terminal, the normal formatted output (standard output) is
       redirected to the nirvana device  /dev/null.   The  resulting  diagnostic
       messages are displayed directly below the corresponding example.

   Command line option
       Example:

              sh# echo &apos;.
              &gt; .de test_macro
              &gt; ..
              &gt; .test_macro
              &gt; .test_macro some dummy arguments
              &gt; &apos; | groff -m trace &gt;/dev/null

              *** .de test_macro
              *** de trace enter: .test_macro
              *** trace exit: .test_macro
              *** de trace enter: .test_macro &quot;some&quot; &quot;dummy&quot; &quot;arguments&quot;
              *** trace exit: .test_macro &quot;some&quot; &quot;dummy&quot; &quot;arguments&quot;

       The  entry  and  the exit of each macro call is displayed on the terminal
       (standard output) &#8212; together with the arguments (if any).

   Nested macro calls
       Example:

              sh# echo &apos;.
              &gt; .de child
              &gt; ..
              &gt; .de parent
              &gt; .child
              &gt; ..
              &gt; .parent
              &gt; &apos; | groff -m trace &gt;/dev/null

              *** .de child
              *** .de parent
              *** de trace enter: .parent
               *** de trace enter: .child
               *** trace exit: .child
              *** trace exit: .parent

       This shows that macro calls can be nested.   This  powerful  feature  can
       help to tack down quite complex call stacks.

   Activating with .mso
       Example:

              sh# echo &apos;.
              &gt; .de before
              &gt; ..
              &gt; .mso trace.tmac
              &gt; .de after
              &gt; ..
              &gt; .before
              &gt; .after
              &gt; .before
              &gt;  &apos; | groff &gt;/dev/null

              *** de trace enter: .after
              *** trace exit: .after

       Here, the tracing is activated within the document, not by a command line
       option.  As tracing was not active when macro before was defined, no call
       of this macro is protocolled; on the other hand, the macro after is fully
       protocolled.

PROBLEMS
       Because trace.tmac wraps the .de request (and its cousins),  macro  argu&#8208;
       ments  are  expanded one level more.  This causes problems if an argument
       contains four backslashes or more to prevent too early expansion  of  the
       backslash.  For example, this macro call

              .foo \\\\n[bar]

       normally  passes  `\\n[bar]&apos;  to macro `.foo&apos;, but with the redefined .de
       request it passes `\n[bar]&apos; instead.

       The solution to this problem is to use groff&apos;s  \E  escape  which  is  an
       escape character not interpreted in copy mode, for example

              .foo \En[bar]

FILES
       The  trace  macros  are  kept  in the file trace.tmac located in the tmac
       directory; see groff_tmac(5) for details.

ENVIRONMENT
       $GROFF_TMAC_PATH
              A colon-separated list of additional tmac directories in which  to
              search for macro files; see groff_tmac(5) for details.

AUTHOR
       Copyright (C) 2002, 2006, 2007, 2008 Free Software Foundation, Inc.
&#12;       This  document  is distributed under the terms of the FDL (GNU Free Docu&#8208;
       mentation License) version 1.1 or later.  You should have received a copy
       of  the  FDL  on  your  system,  it  is also available on-line at the GNU
       copyleft site &#10216;http://www.gnu.org/copyleft/fdl.html&#10217;.

       This document is part of groff, the GNU roff distribution.  It was  writ&#8208;
       ten by Bernd Warken.

SEE ALSO
       groff(1)
              An overview of the groff system.

       troff(1)
              For details on option -m.

       groffer(1)
              A viewer program for all kinds of roff documents.

       groff_tmac(5)
              A general description of groff macro packages.

       groff(7)
              A short reference for the groff formatting language.

       A  complete  reference  for all parts of the groff system is found in the
       groff info(1) file.



Groff Version 1.21                25 June 2012                    GROFF_TRACE(7)

</pre></body></html>
