<html>
<head><meta charset=utf-8/>
<title>listen - listen for connections on a socket</title></head>
<body><pre>

LISTEN(2)                   Linux Programmer&apos;s Manual                  LISTEN(2)



NAME
       listen - listen for connections on a socket

SYNOPSIS
       #include &lt;sys/types.h&gt;          /* See NOTES */
       #include &lt;sys/socket.h&gt;

       int listen(int sockfd, int backlog);

DESCRIPTION
       listen() marks the socket referred to by sockfd as a passive socket, that
       is, as a socket that will be used to accept incoming connection  requests
       using accept(2).

       The  sockfd argument is a file descriptor that refers to a socket of type
       SOCK_STREAM or SOCK_SEQPACKET.

       The backlog argument defines the maximum length to  which  the  queue  of
       pending connections for sockfd may grow.  If a connection request arrives
       when the queue is full, the client may receive an error with  an  indica&#8208;
       tion  of ECONNREFUSED or, if the underlying protocol supports retransmis&#8208;
       sion, the request may be ignored so that a later reattempt at  connection
       succeeds.

RETURN VALUE
       On success, zero is returned.  On error, -1 is returned, and errno is set
       appropriately.

ERRORS
       EADDRINUSE
              Another socket is already listening on the same port.

       EBADF  The argument sockfd is not a valid descriptor.

       ENOTSOCK
              The argument sockfd is not a socket.

       EOPNOTSUPP
              The socket is not of a type that supports the listen() operation.

CONFORMING TO
       4.4BSD, POSIX.1-2001.  The  listen()  function  call  first  appeared  in
       4.2BSD.

NOTES
       To accept connections, the following steps are performed:

           1.  A socket is created with socket(2).

           2.  The  socket  is  bound  to a local address using bind(2), so that
               other sockets may be connect(2)ed to it.

           3.  A willingness to accept incoming connections and  a  queue  limit
               for incoming connections are specified with listen().

           4.  Connections are accepted with accept(2).

       POSIX.1-2001  does  not  require the inclusion of &lt;sys/types.h&gt;, and this
       header file is not required on Linux.   However,  some  historical  (BSD)
       implementations  required this header file, and portable applications are
       probably wise to include it.
&#12;       The behavior of the backlog argument on TCP sockets  changed  with  Linux
       2.2.   Now it specifies the queue length for completely established sock&#8208;
       ets waiting to be accepted, instead of the number of  incomplete  connec&#8208;
       tion  requests.   The  maximum length of the queue for incomplete sockets
       can be set using /proc/sys/net/ipv4/tcp_max_syn_backlog.  When syncookies
       are  enabled  there  is  no  logical  maximum  length and this setting is
       ignored.  See tcp(7) for more information.

       If   the   backlog   argument   is   greater   than    the    value    in
       /proc/sys/net/core/somaxconn,  then  it  is  silently  truncated  to that
       value; the default value in this file is 128.  In kernels before  2.4.25,
       this limit was a hard coded value, SOMAXCONN, with the value 128.

EXAMPLE
       See bind(2).

SEE ALSO
       accept(2), bind(2), connect(2), socket(2), socket(7)

COLOPHON
       This  page  is  part  of  release 3.44 of the Linux man-pages project.  A
       description of the project, and information about reporting bugs, can  be
       found at http://www.kernel.org/doc/man-pages/.



Linux                              2008-11-20                          LISTEN(2)

</pre></body></html>
