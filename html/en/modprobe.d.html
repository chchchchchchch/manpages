<html>
<head><meta charset=utf-8/>
<title>modprobe.d - Configuration directory for modprobe</title></head>
<body><pre>

MODPROBE.D(5)                      modprobe.d                      MODPROBE.D(5)



NAME
       modprobe.d - Configuration directory for modprobe

SYNOPSIS
       /usr/lib/modprobe.d/*.conf

       /etc/modprobe.d/*.conf

       /run/modprobe.d/*.conf

DESCRIPTION
       Because the modprobe command can add or remove more than one module, due
       to modules having dependencies, we need a method of specifying what
       options are to be used with those modules. All files underneath the
       /etc/modprobe.d directory which end with the .conf extension specify
       those options as required. They can also be used to create convenient
       aliases: alternate names for a module, or they can override the normal
       modprobe behavior altogether for those with special requirements (such as
       inserting more than one module).

       Note that module and alias names (like other module names) can have - or
       _ in them: both are interchangeable throughout all the module commands as
       underscore conversion happens automatically.

       The format of and files under modprobe.d is simple: one command per line,
       with blank lines and lines starting with &apos;#&apos; ignored (useful for adding
       comments). A &apos;\&apos; at the end of a line causes it to continue on the next
       line, which makes the file a bit neater.

COMMANDS
       alias wildcard modulename
           This allows you to give alternate names for a module. For example:
           &quot;alias my-mod really_long_modulename&quot; means you can use &quot;modprobe
           my-mod&quot; instead of &quot;modprobe really_long_modulename&quot;. You can also
           use shell-style wildcards, so &quot;alias my-mod* really_long_modulename&quot;
           means that &quot;modprobe my-mod-something&quot; has the same effect. You can&apos;t
           have aliases to other aliases (that way lies madness), but aliases
           can have options, which will be added to any other options.

           Note that modules can also contain their own aliases, which you can
           see using modinfo. These aliases are used as a last resort (ie. if
           there is no real module, install, remove, or alias command in the
           configuration).

       blacklist modulename
           Modules can contain their own aliases: usually these are aliases
           describing the devices they support, such as &quot;pci:123...&quot;. These
           &quot;internal&quot; aliases can be overridden by normal &quot;alias&quot; keywords, but
           there are cases where two or more modules both support the same
           devices, or a module invalidly claims to support a device that it
           does not: the blacklist keyword indicates that all of that particular
           module&apos;s internal aliases are to be ignored.

       install modulename command...
           This command instructs modprobe to run your command instead of
           inserting the module in the kernel as normal. The command can be any
           shell command: this allows you to do any kind of complex processing
           you might wish. For example, if the module &quot;fred&quot; works better with
           the module &quot;barney&quot; already installed (but it doesn&apos;t depend on it,
           so modprobe won&apos;t automatically load it), you could say &quot;install fred
           /sbin/modprobe barney; /sbin/modprobe --ignore-install fred&quot;, which
           would do what you wanted. Note the --ignore-install, which stops the
           second modprobe from running the same install command again. See also
           remove below.

           The long term future of this command as a solution to the problem of
           providing additional module dependencies is not assured and it is
           intended to replace this command with a warning about its eventual
           removal or deprecation at some point in a future release. Its use
           complicates the automated determination of module dependencies by
           distribution utilities, such as mkinitrd (because these now need to
           somehow interpret what the install commands might be doing. In a
           perfect world, modules would provide all dependency information
           without the use of this command and work is underway to implement
           soft dependency support within the Linux kernel.

           If you use the string &quot;$CMDLINE_OPTS&quot; in the command, it will be
           replaced by any options specified on the modprobe command line. This
           can be useful because users expect &quot;modprobe fred opt=1&quot; to pass the
           &quot;opt=1&quot; arg to the module, even if there&apos;s an install command in the
           configuration file. So our above example becomes &quot;install fred
           /sbin/modprobe barney; /sbin/modprobe --ignore-install fred
           $CMDLINE_OPTS&quot;

       options modulename option...
           This command allows you to add options to the module modulename
           (which might be an alias) every time it is inserted into the kernel:
           whether directly (using modprobe modulename or because the module
           being inserted depends on this module.

           All options are added together: they can come from an option for the
           module itself, for an alias, and on the command line.

       remove modulename command...
           This is similar to the install command above, except it is invoked
           when &quot;modprobe -r&quot; is run.

       softdep modulename pre: modules... post: modules...
           The softdep command allows you to specify soft, or optional, module
           dependencies.  modulename can be used without these optional modules
           installed, but usually with some features missing. For example, a
           driver for a storage HBA might require another module be loaded in
           order to use management features.

           pre-deps and post-deps modules are lists of names and/or aliases of
           other modules that modprobe will attempt to install (or remove) in
           order before and after the main module given in the modulename
           argument.

           Example: Assume &quot;softdep c pre: a b post: d e&quot; is provided in the
           configuration. Running &quot;modprobe c&quot; is now equivalent to &quot;modprobe a
           b c d e&quot; without the softdep. Flags such as --use-blacklist are
           applied to all the specified modules, while module parameters only
           apply to module c.

           Note: if there are install or remove commands with the same
           modulename argument, softdep takes precedence.

COMPATIBILITY
       A future version of kmod will come with a strong warning to avoid use of
       the install as explained above. This will happen once support for soft
       dependencies in the kernel is complete. That support will complement the
       existing softdep support within this utility by providing such
       dependencies directly within the modules.

COPYRIGHT
       This manual page originally Copyright 2004, Rusty Russell, IBM
       Corporation. Maintained by Jon Masters and others.

SEE ALSO
       modprobe(8), modules.dep(5)

AUTHORS
       Jon Masters &lt;jcm@jonmasters.org&gt;
           Developer

       Robby Workman &lt;rworkman@slackware.com&gt;
           Developer

       Lucas De Marchi &lt;lucas.demarchi@profusion.mobi&gt;
           Developer



kmod                               06/19/2012                      MODPROBE.D(5)

</pre></body></html>
