<html>
<head><meta charset=utf-8/>
<title>scandir, alphasort, versionsort - scan a directory for matching entries</title></head>
<body><pre>

SCANDIR(3)                  Linux Programmer&apos;s Manual                 SCANDIR(3)



NAME
       scandir, alphasort, versionsort - scan a directory for matching entries

SYNOPSIS
       #include &lt;dirent.h&gt;

       int scandir(const char *dirp, struct dirent ***namelist,
              int (*filter)(const struct dirent *),
              int (*compar)(const struct dirent **, const struct dirent **));

       int alphasort(const void *a, const void *b);

       int versionsort(const void *a, const void *b);

   Feature Test Macro Requirements for glibc (see feature_test_macros(7)):

       scandir(), alphasort(): _BSD_SOURCE || _SVID_SOURCE
       versionsort(): _GNU_SOURCE

DESCRIPTION
       The scandir() function scans the directory dirp, calling filter() on each
       directory entry.  Entries for which filter() returns nonzero  are  stored
       in  strings  allocated via malloc(3), sorted using qsort(3) with the com&#8208;
       parison function compar(), and collected in array namelist which is allo&#8208;
       cated via malloc(3).  If filter is NULL, all entries are selected.

       The alphasort() and versionsort() functions can be used as the comparison
       function compar().  The former sorts directory entries using  strcoll(3),
       the   latter   using   strverscmp(3)  on  the  strings  (*a)-&gt;d_name  and
       (*b)-&gt;d_name.

RETURN VALUE
       The scandir() function returns the number of directory  entries  selected
       or -1 if an error occurs.

       The  alphasort() and versionsort() functions return an integer less than,
       equal to, or greater than zero if the first argument is considered to  be
       respectively less than, equal to, or greater than the second.

ERRORS
       ENOENT The path in dirp does not exist.

       ENOMEM Insufficient memory to complete the operation.

       ENOTDIR
              The path in dirp is not a directory.

VERSIONS
       versionsort() was added to glibc in version 2.1.

CONFORMING TO
       alphasort()  and  scandir() are specified in POSIX.1-2008, and are widely
       available.  versionsort() is a GNU extension.

       The functions scandir() and alphasort() are from 4.3BSD,  and  have  been
       available  under Linux since libc4.  Libc4 and libc5 use the more precise
       prototype

           int alphasort(const struct dirent ** a,
                         const struct dirent **b);

       but glibc 2.0 returns to the imprecise BSD prototype.

       The function versionsort() is a GNU extension, available since glibc 2.1.

       Since glibc 2.1, alphasort() calls strcoll(3); earlier it used strcmp(3).

EXAMPLE
       #define _SVID_SOURCE
       /* print files in current directory in reverse order */
       #include &lt;dirent.h&gt;

       int
       main(void)
       {
           struct dirent **namelist;
           int n;

           n = scandir(&quot;.&quot;, &amp;namelist, NULL, alphasort);
           if (n &lt; 0)
               perror(&quot;scandir&quot;);
           else {
               while (n--) {
                   printf(&quot;%s\n&quot;, namelist[n]-&gt;d_name);
                   free(namelist[n]);
               }
               free(namelist);
           }
       }

SEE ALSO
       closedir(3), fnmatch(3), opendir(3),  readdir(3),  rewinddir(3),  scandi&#8208;
       rat(3), seekdir(3), strcmp(3), strcoll(3), strverscmp(3), telldir(3)

COLOPHON
       This  page  is  part  of  release 3.44 of the Linux man-pages project.  A
       description of the project, and information about reporting bugs, can  be
       found at http://www.kernel.org/doc/man-pages/.



GNU                                2012-04-26                         SCANDIR(3)

</pre></body></html>
