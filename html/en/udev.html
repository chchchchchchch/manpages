<html>
<head><meta charset=utf-8/>
<title>udev - Linux dynamic device management</title></head>
<body><pre>

UDEV(7)                               udev                               UDEV(7)



NAME
       udev - Linux dynamic device management

DESCRIPTION
       udev supplies the system software with device events, manages permissions
       of device nodes and may create additional symlinks in the /dev directory,
       or renames network interfaces. The kernel usually just assigns
       unpredictable device names based on the order of discovery. Meaningful
       symlinks or network device names provide a way to reliably identify
       devices based on their properties or current configuration.

       The udev daemon, udevd(8), receives device uevents directly from the
       kernel whenever a device is added or removed from the system, or it
       changes its state. When udev receives a device event, it matches its
       configured set of rules against various device attributes to identify the
       device. Rules that match may provide additional device information to be
       stored in the udev database or to be used to create meaningful symlink
       names.

       All device information udev processes is stored in the udev database and
       sent out to possible event subscribers. Access to all stored data and the
       event sources is provided by the library libudev.

CONFIGURATION
       udev configuration files are placed in /etc/udev/ and /lib/udev/. All
       empty lines or lines beginning with &apos;#&apos; are ignored.

   Configuration file
       udev expects its main configuration file at /etc/udev/udev.conf. It
       consists of a set of variables allowing the user to override default udev
       values. The following variables can be set:

       udev_root
           Specifies where to place the device nodes in the filesystem. The
           default value is /dev.

       udev_log
           The logging priority. Valid values are the numerical syslog
           priorities or their textual representations: err, info and debug.

   Rules files
       The udev rules are read from the files located in the default rules
       directory /lib/udev/rules.d/, the custom rules directory
       /etc/udev/rules.d/ and the temporary rules directory /run/udev/rules.d/.
       All rule files are collectively sorted and processed in lexical order,
       regardless of the directories in which they live. However, files in
       /etc/udev/rules.d/ take precedence over files with the same name in
       /lib/udev/rules.d/; this can be used to ignore a default rules file if
       needed.

       Rule files must have the extension .rules; other extensions are ignored.

       Every line in the rules file contains at least one key-value pair. There
       are two kind of keys: match and assignment. If all match keys are
       matching against its value, the rule gets applied and the assignment keys
       get the specified value assigned.

       A matching rule may rename a network interface, add symlinks pointing to
       the device node, or run a specified program as part of the event
       handling.

       A rule consists of a comma-separated list of one or more key-value pairs.
       Each key has a distinct operation, depending on the used operator. Valid
       operators are:

       ==
           Compare for equality.

       !=
           Compare for inequality.

       =
           Assign a value to a key. Keys that represent a list are reset and
           only this single value is assigned.

       +=
           Add the value to a key that holds a list of entries.

       :=
           Assign a value to a key finally; disallow any later changes.

       The following key names can be used to match against device properties.
       Some of the keys also match against properties of the parent devices in
       sysfs, not only the device that has generated the event. If multiple keys
       that match a parent device are specified in a single rule, all these keys
       must match at one and the same parent device.

       ACTION
           Match the name of the event action.

       DEVPATH
           Match the devpath of the event device.

       KERNEL
           Match the name of the event device.

       NAME
           Match the name of the node or network interface. It can be used once
           the NAME key has been set in one of the preceding rules.

       SYMLINK
           Match the name of a symlink targeting the node. It can be used once a
           SYMLINK key has been set in one of the preceding rules. There may be
           multiple symlinks; only one needs to match.

       SUBSYSTEM
           Match the subsystem of the event device.

       DRIVER
           Match the driver name of the event device. Only set this key for
           devices which are bound to a driver at the time the event is
           generated.

       ATTR{filename}
           Match sysfs attribute values of the event device. Trailing whitespace
           in the attribute values is ignored unless the specified match value
           itself contains trailing whitespace.

       KERNELS
           Search the devpath upwards for a matching device name.

       SUBSYSTEMS
           Search the devpath upwards for a matching device subsystem name.

       DRIVERS
           Search the devpath upwards for a matching device driver name.

       ATTRS{filename}
           Search the devpath upwards for a device with matching sysfs attribute
           values. If multiple ATTRS matches are specified, all of them must
           match on the same device. Trailing whitespace in the attribute values
           is ignored unless the specified match value itself contains trailing
           whitespace.

       TAGS
           Search the devpath upwards for a device with matching tag.

       ENV{key}
           Match against a device property value.

       TAG
           Match against a device tag.

       TEST{octal mode mask}
           Test the existence of a file. An octal mode mask can be specified if
           needed.

       PROGRAM
           Execute a program to determine whether there is a match; the key is
           true if the program returns successfully. The device properties are
           made available to the executed program in the environment. The
           program&apos;s stdout is available in the RESULT key.

       RESULT
           Match the returned string of the last PROGRAM call. This key can be
           used in the same or in any later rule after a PROGRAM call.

       Most of the fields support shell-style pattern matching. The following
       pattern characters are supported:

       *
           Matches zero or more characters.

       ?
           Matches any single character.

       []
           Matches any single character specified within the brackets. For
           example, the pattern string &apos;tty[SR]&apos; would match either &apos;ttyS&apos; or
           &apos;ttyR&apos;. Ranges are also supported via the &apos;-&apos; character. For example,
           to match on the range of all digits, the pattern [0-9] could be used.
           If the first character following the &apos;[&apos; is a &apos;!&apos;, any characters not
           enclosed are matched.

       The following keys can get values assigned:

       NAME
           What a network interface should be named.

           Also, as a temporary workaround, this is what a device node should be
           named; usually the kernel provides the defined node name or creates
           and removes the node before udev even receives any event. Changing
           the node name from the kernel&apos;s default creates inconsistencies and
           is not supported. If the kernel and NAME specify different names, an
           error is logged. udev is only expected to handle device node
           permissions and to create additional symlinks, not to change
           kernel-provided device node names. Instead of renaming a device node,
           SYMLINK should be used. However, symlink names must never conflict
           with device node names, as that would result in unpredictable
           behavior.

       SYMLINK
           The name of a symlink targeting the node. Every matching rule adds
           this value to the list of symlinks to be created. Multiple symlinks
           may be specified by separating the names by the space character. In
           case multiple devices claim the same name, the link always points to
           the device with the highest link_priority. If the current device goes
           away, the links are re-evaluated and the device with the next highest
           link_priority becomes the owner of the link. If no link_priority is
           specified, the order of the devices (and which one of them owns the
           link) is undefined. Also, symlink names must never conflict with the
           kernel&apos;s default device node names, as that would result in
           unpredictable behavior.

       OWNER, GROUP, MODE
           The permissions for the device node. Every specified value overwrites
           the compiled-in default value.

       ATTR{key}
           The value that should be written to a sysfs attribute of the event
           device.

       ENV{key}
           Set a device property value. Property names with a leading &apos;.&apos; are
           neither stored in the database nor exported to events or external
           tools (run by, say, the PROGRAM match key).

       TAG
           Attach a tag to a device. This is used to filter events for users of
           libudev&apos;s monitor functionality, or to enumerate a group of tagged
           devices. The implementation can only work efficiently if only a few
           tags are attached to a device. It is only meant to be used in
           contexts with specific device filter requirements, and not as a
           general-purpose flag. Excessive use might result in inefficient event
           handling.

       RUN
           Add a program to the list of programs to be executed for a specific
           device. This can only be used for very short running tasks. Running
           an event process for a long period of time may block all further
           events for this or a dependent device. Long running tasks need to be
           immediately detached from the event process itself.

           If no absolute path is given, the program is expected to live in the
           directory provided at compile-time to configure via --libexecdir
           (this is usually /lib/udev), otherwise the absolute path must be
           specified. The program name and following arguments are separated by
           spaces. Single quotes can be used to specify arguments with spaces.

       LABEL
           A named label to which a GOTO may jump.

       GOTO
           Jumps to the next LABEL with a matching name.

       IMPORT{type}
           Import a set of variables as device properties, depending on type:

           program
               Execute an external program specified as the assigned value and
               import its output, which must be in environment key format. Path
               specification, command/argument separation, and quoting work like
               in RUN.

           file
               Import a text file specified as the assigned value, the content
               of which must be in environment key format.

           db
               Import a single property specified as the assigned value from the
               current device database. This works only if the database is
               already populated by an earlier event.

           cmdline
               Import a single property from the kernel command line. For simple
               flags the value of the property is set to &apos;1&apos;.

           parent
               Import the stored keys from the parent device by reading the
               database entry of the parent device. The value assigned to
               IMPORT{parent} is used as a filter of key names to import (with
               the same shell-style pattern matching used for comparisons).

       WAIT_FOR
           Wait for a file to become available or until a timeout of 10 seconds
           expires. The path is relative to the sysfs device; if no path is
           specified, this waits for an attribute to appear.

       OPTIONS
           Rule and device options:

           link_priority=value
               Specify the priority of the created symlinks. Devices with higher
               priorities overwrite existing symlinks of other devices. The
               default is 0.

           event_timeout=
               Number of seconds an event waits for operations to finish before
               giving up and terminating itself.

           string_escape=none|replace
               Usually control and other possibly unsafe characters are replaced
               in strings used for device naming. The mode of replacement can be
               specified with this option.

           static_node=
               Apply the permissions specified in this rule to the static device
               node with the specified name. Static device nodes might be
               provided by kernel modules or copied from /lib/udev/devices.
               These nodes might not have a corresponding kernel device at the
               time udevd is started; they can trigger automatic kernel module
               loading.

           watch
               Watch the device node with inotify; when the node is closed after
               being opened for writing, a change uevent is synthesized.

           nowatch
               Disable the watching of a device node with inotify.

       The NAME, SYMLINK, PROGRAM, OWNER, GROUP, MODE and RUN fields support
       simple string substitutions. The RUN substitutions are performed after
       all rules have been processed, right before the program is executed,
       allowing for the use of device properties set by earlier matching rules.
       For all other fields, substitutions are performed while the individual
       rule is being processed. The available substitutions are:

       $kernel, %k
           The kernel name for this device.

       $number, %n
           The kernel number for this device. For example, &apos;sda3&apos; has kernel
           number of &apos;3&apos;

       $devpath, %p
           The devpath of the device.

       $id, %b
           The name of the device matched while searching the devpath upwards
           for SUBSYSTEMS, KERNELS, DRIVERS and ATTRS.

       $driver
           The driver name of the device matched while searching the devpath
           upwards for SUBSYSTEMS, KERNELS, DRIVERS and ATTRS.

       $attr{file}, %s{file}
           The value of a sysfs attribute found at the device where all keys of
           the rule have matched. If the matching device does not have such an
           attribute, and a previous KERNELS, SUBSYSTEMS, DRIVERS, or ATTRS test
           selected a parent device, then the attribute from that parent device
           is used.

           If the attribute is a symlink, the last element of the symlink target
           is returned as the value.

       $env{key}, %E{key}
           A device property value.

       $major, %M
           The kernel major number for the device.

       $minor, %m
           The kernel minor number for the device.

       $result, %c
           The string returned by the external program requested with PROGRAM. A
           single part of the string, separated by a space character, may be
           selected by specifying the part number as an attribute: %c{N}. If the
           number is followed by the &apos;+&apos; character, this part plus all remaining
           parts of the result string are substituted: %c{N+}

       $parent, %P
           The node name of the parent device.

       $name
           The current name of the device node. If not changed by a rule, it is
           the name of the kernel device.

       $links
           A space-separated list of the current symlinks. The value is only set
           during a remove event or if an earlier rule assigned a value.

       $root, %r
           The udev_root value.

       $sys, %S
           The sysfs mount point.

       $tempnode, %N
           The name of a temporary device node created to provide access to the
           device from a external program before the real node is created.

       %%
           The &apos;%&apos; character itself.

       $$
           The &apos;$&apos; character itself.

AUTHOR
       Written by Greg Kroah-Hartman greg@kroah.com and Kay Sievers
       kay.sievers@vrfy.org. With much help from Dan Stekloff and many others.
&#12;SEE ALSO
       udevd(8), udevadm(8)



udev                               11/07/2011                            UDEV(7)

</pre></body></html>
