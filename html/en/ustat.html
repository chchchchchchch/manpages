<html>
<head><meta charset=utf-8/>
<title>ustat - get file system statistics</title></head>
<body><pre>

USTAT(2)                    Linux Programmer&apos;s Manual                   USTAT(2)



NAME
       ustat - get file system statistics

SYNOPSIS
       #include &lt;sys/types.h&gt;
       #include &lt;unistd.h&gt;    /* libc[45] */
       #include &lt;ustat.h&gt;     /* glibc2 */

       int ustat(dev_t dev, struct ustat *ubuf);

DESCRIPTION
       ustat() returns information about a mounted file system.  dev is a device
       number identifying a device containing a mounted file system.  ubuf is  a
       pointer to a ustat structure that contains the following members:

           daddr_t f_tfree;      /* Total free blocks */
           ino_t   f_tinode;     /* Number of free inodes */
           char    f_fname[6];   /* Filsys name */
           char    f_fpack[6];   /* Filsys pack name */

       The  last  two  fields, f_fname and f_fpack, are not implemented and will
       always be filled with null bytes (&apos;\0&apos;).

RETURN VALUE
       On success, zero is returned and the ustat structure pointed to  by  ubuf
       will  be filled in.  On error, -1 is returned, and errno is set appropri&#8208;
       ately.

ERRORS
       EFAULT ubuf points outside of your accessible address space.

       EINVAL dev does not refer to a device containing a mounted file system.

       ENOSYS The mounted file system referenced by dev does  not  support  this
              operation, or any version of Linux before 1.3.16.

CONFORMING TO
       SVr4.

NOTES
       ustat()  is deprecated and has only been provided for compatibility.  All
       new programs should use statfs(2) instead.

   HP-UX Notes
       The HP-UX version of the ustat structure has an additional field,  f_blk&#8208;
       size, that is unknown elsewhere.  HP-UX warns: For some file systems, the
       number of free inodes does not change.  Such file systems will return  -1
       in  the  field  f_tinode.   For some file systems, inodes are dynamically
       allocated.  Such file systems will return  the  current  number  of  free
       inodes.

SEE ALSO
       stat(2), statfs(2)

COLOPHON
       This  page  is  part  of  release 3.44 of the Linux man-pages project.  A
       description of the project, and information about reporting bugs, can  be
       found at http://www.kernel.org/doc/man-pages/.



Linux                              2003-08-04                           USTAT(2)

</pre></body></html>
